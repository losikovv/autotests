task autoMr(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/mr.xml'
        includeGroups 'MRAutoCheck'
    }
}

task debug(type: Test) {
    useTestNG() {
        options {
            listeners.add("ru.instamart.reforged.core.listener.UiExecutionListener")
            listeners.add("ru.instamart.reforged.core.listener.UiDefaultListener")
        }
        suites 'src/test/resources/suite/debug.xml'
        includeGroups 'debug'
    }
}

task localRun(type: Test) {
    useTestNG() {
        options {
            listeners.add("ru.instamart.reforged.core.listener.UiExecutionListener")
            listeners.add("ru.instamart.reforged.core.listener.UiDefaultListener")
        }
    }
    environment 'BROWSER', 'chrome'
    environment 'HEADLESS', 'false'
    environment 'PROJECT_ID', 'DEBUG'
    environment 'TEST_RUN_NAME', 'STF UI DEBUG'
}

task localRunB2B(type: Test) {
    useTestNG() {
        options {
            listeners.add("ru.instamart.reforged.core.listener.UiExecutionListener")
            listeners.add("ru.instamart.reforged.core.listener.UiDefaultListener")
        }
    }
    environment 'BROWSER', 'chrome'
    environment 'HEADLESS', 'false'
    environment 'URL_STF_FRONT', 'https://next-default.k-stage.sbermarket.tech/'
    environment 'URL_B2B_FRONT', 'https://next-default-smbusiness.k-stage.sbermarket.tech/'
    environment 'B2B_FORWARD', 's-sb-stf15-smbusiness'
    environment 'STF_FORWARD', 's-sb-stf15-smbusiness'
    environment 'CI_MODULE', 'ui-b2b'
    environment 'P_ENV', 'business-custom'
    environment 'PROJECT_ID', 'DEBUG'
    environment 'TEST_RUN_NAME', 'B2B UI DEBUG'
}

task localRunAdminOnDemand(type: Test) {
    useTestNG() {
        options {
            listeners.add("ru.instamart.reforged.core.listener.UiExecutionListener")
            listeners.add("ru.instamart.reforged.core.listener.UiDefaultListener")
        }
    }
    environment 'BROWSER', 'chrome'
    environment 'HEADLESS', 'false'
    environment 'ADMIN_URL', 'https://stf-6.k-stage.sbermarket.tech/'
    environment 'URL_STF_BACKEND', 'stf-6.k-stage.sbermarket.tech'
    environment 'URL_SHP', 'shp-6.k-stage.sbermarket.tech'
    environment 'SHP_NAMESPACE', 'paas-content-shopper-6'
    environment 'SHP_LABEL', 'app.kubernetes.io/component=pg-exporter'
    systemProperty 'service', 'paas-content-operations-shifts'
    environment 'PROJECT_ID', 'DEBUG'
    environment 'TEST_RUN_NAME', 'Admin On Demand UI DEBUG'
}

task localRunSelgros(type: Test) {
    useTestNG() {
        options {
            listeners.add("ru.instamart.reforged.core.listener.UiExecutionListener")
            listeners.add("ru.instamart.reforged.core.listener.UiDefaultListener")
        }
    }
    environment 'BROWSER', 'chrome'
    environment 'HEADLESS', 'false'
    environment 'P_ENV', 'selgros-preprod'
    environment 'PROJECT_ID', 'DEBUG'
    environment 'TEST_RUN_NAME', 'Selgros UI DEBUG'
}

task ciRunUi(type: Test) {
    def CI_GROUP = System.getenv('CI_GROUP')

    if (CI_GROUP == null) {
        println('U miss CI_GROUP')
        return
    }

    useTestNG() {
        suites "src/test/resources/suite/all.xml"
        includeGroups CI_GROUP
    }
}