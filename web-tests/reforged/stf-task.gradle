task sberUiSmoke(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/smoke/stf.xml'
        includeGroups 'smoke'
        threadCount 6
    }
    environment 'PROJECT_ID', 'STF'
    environment 'TEST_RUN_NAME', 'STF UI Smoke'
}

task uiSmokeProduction(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/smoke/stf-prod.xml'
        includeGroups 'stf_prod_smoke'
    }
    environment 'P_ENV', "sbermarket-production"
    environment 'PROJECT_ID', 'STF'
    environment 'TEST_RUN_NAME', 'STF UI Production Smoke'
}

task sberRegression(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/regress/stf.xml'
        includeGroups 'regression', 'smoke'
        threadCount 15
    }
    environment 'PROJECT_ID', 'STF'
    environment 'TEST_RUN_NAME', 'STF UI Regression'
}

task sbermarketUiCustom(type: Test) {
    def CI_GROUP = System.getenv('CI_GROUP')
    def STF_FORWARD = System.getenv('STF_FORWARD')

    if (CI_GROUP == null) {
        println('U miss CI_GROUP')
        return
    }

    useTestNG() {
        suites "src/test/resources/suite/regress/stf.xml"
        includeGroups CI_GROUP
        threadCount STF_FORWARD == null ? 3 : STF_FORWARD.startsWith("s-sb-stfkraken") ? 15 : STF_FORWARD.startsWith("s-sb-stf") ? 8 : 3
    }
    environment 'P_ENV', 'sbermarket-custom'
}