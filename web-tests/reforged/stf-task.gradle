task sberUiSmoke(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/smoke/stf.xml'
        includeGroups 'smoke'
        threadCount 6
    }
    systemProperty 'qase.Project', 'STF'
    systemProperty 'qase.Title', 'STF UI Smoke'
}

task uiSmokeProduction(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/smoke/stf-prod.xml'
        includeGroups 'stf_prod_smoke'
    }
    environment 'URL_STF_FRONT', 'https://sbermarket.ru/'
    environment 'ADMIN_URL', 'https://admin.sbmt.io/'
    environment 'P_ENV', "sbermarket-production"
    systemProperty 'qase.Project', 'STF'
    systemProperty 'qase.Title', 'STF UI Production Smoke'
}

task sberRegression(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/regress/stf.xml'
        includeGroups 'regression', 'smoke'
        threadCount 15
    }
    systemProperty 'qase.Project', 'STF'
    systemProperty 'qase.Title', 'STF UI Regression'
}

task sbermarketUiCustom(type: Test) {
    def CI_GROUP = System.getenv('CI_GROUP')
    def STF_FORWARD = System.getenv('STF_FORWARD')

    if (CI_GROUP == null) {
        println('U miss CI_GROUP')
        return
    }

    useTestNG() {
        suites "src/test/resources/suite/regress/stf.xml"
        includeGroups CI_GROUP
        threadCount STF_FORWARD == null ? 3 : STF_FORWARD.startsWith("s-sb-stfkraken") ? 15 : STF_FORWARD.startsWith("s-sb-stf") ? 8 : 3
    }
    environment 'P_ENV', 'sbermarket-custom'
}