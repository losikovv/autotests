plugins {
    id 'java'
}

apply from: 'dependencies.gradle'
apply from: 'task.gradle'

subprojects {
    apply plugin: 'java'
    apply plugin: 'idea'

    apply from: project(":").getRootDir().path+"/variables.gradle"

    repositories {
        mavenCentral()
        mavenLocal()
    }

    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11

    [compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

    sourceSets {
        main {
            java {
                srcDirs = ['src/main/java']
            }
            resources {
                srcDirs = ['src/main/resources']
            }
        }
    }
}

project(":reforged") {
    apply plugin: "java-library"

    dependencies {
        implementation project(":kraken")
        implementation project(":api")
        implementation project(":qase-api")

        implementation lib.jackson
        implementation lib.aspectjweaver
        implementation lib.seleniumJava
        implementation lib.allureTestng
        implementation lib.allureJavaCommons
        implementation lib.testng
        implementation lib.jsonSimple

        compileOnly lib.lombok

        annotationProcessor lib.lombok
        testImplementation lib.logback
        testCompileOnly lib.lombok
        testAnnotationProcessor lib.lombok
    }
}

project(":kraken") {
    apply plugin: "java-library"

    dependencies {
        implementation project(":qase-api")
        implementation project(":ab")

        implementation lib.jackson
        implementation lib.allureTestng
        implementation lib.allureJavaCommons
        compileOnly lib.lombok

        implementation lib.testng
        implementation lib.jsonSimple
        annotationProcessor lib.lombok
        testImplementation lib.logback
        testCompileOnly lib.lombok
        testAnnotationProcessor lib.lombok
    }
}

project(":ui") {
    apply plugin: "java-library"

    dependencies {
        implementation project(":kraken")
        implementation project(":api")
        implementation project(":qase-api")

        implementation lib.aspectjweaver
        implementation lib.seleniumJava
        implementation lib.allureTestng
        implementation lib.allureJavaCommons
        implementation lib.jsonSimple
        implementation lib.testng

        compileOnly lib.lombok
        annotationProcessor lib.lombok
        testImplementation lib.logback
        testCompileOnly lib.lombok
        testAnnotationProcessor lib.lombok
    }
}

project(":api") {
    apply plugin: "java-library"

    dependencies {
        implementation project(":kraken")
        implementation project(":qase-api")

        implementation lib.restAssured
        implementation lib.aspectjweaver
        implementation lib.allureRestAssuredReport
        implementation lib.allureTestng
        implementation lib.allureJavaCommons
        implementation lib.jsonSimple
        implementation lib.testng
        implementation lib.restAssuredSchemaValidator

        compileOnly lib.lombok
        annotationProcessor lib.lombok
        testImplementation lib.logback
        testCompileOnly lib.lombok
        testAnnotationProcessor lib.lombok
    }
}

project(":qase-api") {
    apply plugin: "java-library"

    dependencies {
        implementation lib.allureJavaCommons
        implementation lib.lombok
        implementation lib.jsonSimple
        implementation lib.konghq
        testImplementation lib.logback
        annotationProcessor lib.lombok
    }
}

project(":ab") {
    apply plugin: "java-library"

    dependencies {
        implementation lib.lombok
        implementation lib.okhttp
        implementation lib.jacksonAnnotations
        implementation lib.jackson
        implementation lib.logback

        annotationProcessor lib.lombok
    }
}
