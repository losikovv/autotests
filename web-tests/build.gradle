apply plugin: 'java'

repositories {
	mavenCentral()
}

dependencies {
	compile 'io.rest-assured:rest-assured:4.1.1'
	compile 'io.rest-assured:json-schema-validator:4.1.1'
	compile 'org.testng:testng:6.8.8'
    compile 'org.seleniumhq.selenium:selenium-java:3.8.1'
	compile group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1.1'
}

task sberSmoke(type: Test) {
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/suite.xml'
        includeGroups 'sbermarket-smoke'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
    if (project.hasProperty('browser')) {
        systemProperty 'browser',"${browser}"
    }
}

task sberAcceptance(type: Test) {
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/suite.xml'
        includeGroups 'sbermarket-acceptance'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
    if (project.hasProperty('browser')) {
        systemProperty 'browser', "${browser}"
    }
}

task sberRegression(type: Test) {
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/suite.xml'
        includeGroups 'sbermarket-regression'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
    if (project.hasProperty('browser')) {
        systemProperty 'browser',"${browser}"
    }
}

task metroSmoke(type: Test){
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/suite.xml'
        includeGroups 'metro-smoke'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
}

task metroAcceptance(type: Test) {
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/suite.xml'
        includeGroups 'metro-acceptance'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
}

task metroRegression(type: Test){
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/suite.xml'
        includeGroups 'metro-regression'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
}

/* trying to add custom listeners
task sberRegression(type: Test) {
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/suite.xml'
        includeGroups 'sbermarket-regression'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
        options {
            listeners.add("src/main/java/utils/MyTestListerAdapter.java")
        }
    }
}
*/

