buildscript {
    repositories {
        mavenCentral()
        mavenLocal()
        jcenter()
    }
}

plugins {
    id 'java'
    id 'io.qameta.allure' version '2.8.1'
}


allprojects {
    repositories {
        mavenCentral()
        mavenLocal()
        jcenter()
    }
}

apply from: 'dependencies.gradle'
apply from: 'variables.gradle'

apply from: 'task.gradle'
apply from: 'ui-task.gradle'
apply from: 'api-task.gradle'

allure {
    version = versions.allure
    autoconfigure = true
    aspectjweaver = true
    allureJavaVersion = versions.allure
    configuration = "testImplementation"
    useTestNG(){
        version = versions.allure
    }
    downloadLink = "https://repo.maven.apache.org/maven2/io/qameta/allure/allure-commandline/"+versions.allure+"/allure-commandline-"+versions.allure+".zip"
}

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'
sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11
sourceSets.main.java.srcDirs = [ "src/main/java" ]
sourceSets.main.resources.srcDirs = ["src/main/resources"]
sourceSets.test.java.srcDirs = [ "src/test/java" ]
sourceSets.test.resources.srcDirs = ["src/test/resources"]

project(":qase-api") {
    apply plugin: "java-library"

    dependencies {
        implementation lib.allureJavaCommons
        implementation lib.lombok
        implementation lib.jsonSimple
        implementation lib.konghq
        testImplementation lib.logback
        annotationProcessor lib.lombok
    }
}
