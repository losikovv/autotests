task allureCopyHistoryDir(type: Copy) {
    from "build/reports/allure-report/history"
    into "build/allure-results/history"
}

task Testing(type: Test) {
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/suite.xml'
        includeGroups 'testing'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
}

task AutoMRCheck(type: Test) {
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/mr-suite.xml'
        includeGroups 'MRAutoCheck'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
}

//Task for debugging
task debug(type: Test) {
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/t.xml'
        systemProperty 'env',"sbermarket-preprod"
        systemProperty 'qase', "false"
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
}

task cleanup(type: Test) {
    useTestNG() {
        testLogging.showStandardStreams = true
        useDefaultListeners = true
        suites 'src/test/resources/setup-suite.xml'
        includeGroups 'cleanup'
        testLogging {
            events "PASSED", "FAILED", "SKIPPED"
        }
    }
}
