{
  "openapi": "3.0.1",
  "info": {
    "title": "Sbermarket API",
    "version": "v3"
  },
  "servers": [
    {
      "url": "https://admin.instamart.ru"
    }
  ],
  "paths": {
    "/api/stores/{store_id}/aggregating_categories": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        },
        {
          "$ref": "#/components/parameters/store_id"
        }
      ],
      "get": {
        "summary": "Получение пользовательских категорий",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Категории"
        ],
        "responses": {
          "200": {
            "description": "Пользовательские категории",
            "examples": {
              "application/json": {
                "aggregating_categories": [
                  {
                    "id": "buy-again",
                    "parent_id": null,
                    "type": "taxon",
                    "name": "Вы покупали ранее",
                    "slug": "buy-again",
                    "products_count": 1,
                    "icon_url": null,
                    "canonical_url": "https://instamart.ru/categories/buy-again",
                    "position": null,
                    "depth": null,
                    "appearance": {},
                    "is_promo": null,
                    "alt_icon": null,
                    "requirements": []
                  }
                ]
              }
            },
            "content": {}
          }
        }
      }
    },
    "/api/app_configurations/company_details": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        }
      ],
      "get": {
        "summary": "Получение настроек организации",
        "tags": [
          "Конфигурация приложения"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "responses": {
          "200": {
            "description": "successful",
            "examples": {
              "application/json": {
                "app_configuration_company": {
                  "company_phone": "4951206000",
                  "company_name": null,
                  "company_address": null,
                  "company_inn": null,
                  "company_kpp": null,
                  "company_ogrn": null,
                  "company_settlement_acc": null,
                  "company_bank": null,
                  "company_bik": null,
                  "company_correspondent_acc": null
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "app_configuration_company": {
                      "$ref": "#/components/schemas/tenant_contact"
                    }
                  },
                  "required": [
                    "app_configuration_company"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "unauthorized",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/generic_error"
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/categories": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        },
        {
          "$ref": "#/components/parameters/store_id"
        },
        {
          "name": "depth",
          "in": "query",
          "description": "Глубина поддерева категорий",
          "schema": {
            "type": "integer"
          }
        }
      ],
      "get": {
        "summary": "Получение дерева категорий",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Категории"
        ],
        "responses": {
          "200": {
            "description": "Дерево категорий",
            "examples": {
              "application/json": {
                "categories": [],
                "promoted_categories": []
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "categories": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/taxon"
                      }
                    },
                    "promoted_categories": {
                      "type": "array",
                      "nullable": true,
                      "items": {
                        "$ref": "#/components/schemas/taxon"
                      }
                    }
                  },
                  "required": [
                    "categories",
                    "promoted_categories"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/categories/{id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "name": "id",
          "in": "path",
          "required": true,
          "description": "ID категории",
          "schema": {
            "type": "string"
          }
        },
        {
          "$ref": "#/components/parameters/store_id"
        },
        {
          "name": "depth",
          "in": "query",
          "description": "Глубина поддерева категорий относительно запрошенной категории",
          "schema": {
            "type": "integer"
          }
        },
        {
          "name": "include",
          "in": "query",
          "description": "Список дополнительных ассоциаций категории",
          "example": "breadcrumbs",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "Получение поддерева категорий по id категории",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Категории"
        ],
        "responses": {
          "200": {
            "description": "Категория с подкатегориями",
            "examples": {
              "application/json": {
                "category": {
                  "id": 188,
                  "parent_id": 186,
                  "type": "department",
                  "name": "Бакалея",
                  "slug": "produkty-pitaniia/bakalieia",
                  "products_count": 1,
                  "icon_url": null,
                  "canonical_url": "https://instamart.ru/categories/produkty-pitaniia/bakalieia",
                  "ad_banners": [],
                  "position": 0,
                  "depth": 1,
                  "appearance": {},
                  "is_promo": false,
                  "alt_icon": null,
                  "children": [
                    {
                      "id": 187,
                      "parent_id": 188,
                      "type": "taxon",
                      "name": "Чай",
                      "slug": "chai",
                      "products_count": 1,
                      "icon_url": null,
                      "canonical_url": "https://instamart.ru/categories/chai",
                      "ad_banners": [],
                      "position": 0,
                      "depth": 2,
                      "appearance": {},
                      "is_promo": false,
                      "alt_icon": null,
                      "requirements": []
                    }
                  ],
                  "requirements": []
                },
                "breadcrumbs": [
                  {
                    "id": 137,
                    "parent_id": null,
                    "type": "department",
                    "name": "Продукты питания",
                    "slug": "produkty-pitaniia",
                    "products_count": null,
                    "promo_services": [],
                    "icon_url": null,
                    "canonical_url": "https://instamart.ru/categories/produkty-pitaniia",
                    "position": 0,
                    "depth": 0,
                    "appearance": {},
                    "is_promo": false,
                    "alt_icon": null,
                    "requirements": []
                  },
                  {
                    "id": 139,
                    "parent_id": 137,
                    "type": "department",
                    "name": "Бакалея",
                    "slug": "produkty-pitaniia/bakalieia",
                    "products_count": null,
                    "promo_services": [],
                    "icon_url": null,
                    "canonical_url": "https://instamart.ru/categories/produkty-pitaniia/bakalieia",
                    "position": 0,
                    "depth": 1,
                    "appearance": {},
                    "is_promo": false,
                    "alt_icon": null,
                    "requirements": []
                  }
                ]
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "category": {
                    "$ref": "#/components/schemas/taxon"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/checkout/orders/{number}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        }
      ],
      "get": {
        "summary": "Получение заказа",
        "tags": [
          "Checkout V3"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "description": "Номер заказа",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Информация по заказу",
            "examples": {
              "application/json": {
                "order": {
                  "id": 126,
                  "number": "T20557",
                  "total": 0,
                  "promo_total": 0,
                  "total_discount": 0,
                  "item_count": 0,
                  "shipping_method_kind": "by_courier",
                  "total_weight": 0,
                  "shipping_methods": [
                    "by_courier",
                    "pickup"
                  ],
                  "is_alcohol": false,
                  "contacts": {
                    "normalized_phone": null,
                    "phone": null,
                    "email": "test1394@test.ru"
                  },
                  "payments": [],
                  "replacement_policy": null,
                  "payment_tool": null,
                  "address": null,
                  "shipments": [
                    {
                      "id": 99,
                      "cost": 0,
                      "promo": 0,
                      "discount": 0,
                      "number": "H82158171228",
                      "is_alcohol": false,
                      "item_total": 0,
                      "items_quantity": 0,
                      "alerts": [],
                      "total_weight": 0,
                      "checkout": true,
                      "item_count": 0,
                      "store": {
                        "id": 150,
                        "time_zone": "Europe/Moscow",
                        "on_demand": false,
                        "express_delivery": false,
                        "local_date": "2022-03-25"
                      },
                      "shipping_rate": null,
                      "delivery_window": null,
                      "retailer": {
                        "id": 142,
                        "name": "METRO1218",
                        "slug": "metro1218",
                        "color": "#003d7a",
                        "logo_background_color": "#003d7a",
                        "logo": "",
                        "available": true,
                        "environment": "production",
                        "retailer_agreement": {
                          "agreement_type": "oferta_b",
                          "url": "/oferta_b"
                        }
                      }
                    }
                  ],
                  "promotion_codes": []
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "order": {
                      "$ref": "#/components/schemas/order"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": {
                  "status": "401",
                  "title": "Failed to Login"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string"
                        },
                        "title": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "status",
                        "title"
                      ]
                    }
                  },
                  "required": [
                    "errors"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Нет доступа",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "forbidden",
                    "field": null,
                    "message": "Пользователь не может выполнить это действие"
                  }
                ],
                "code": 403
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string"
                            },
                            "field": {
                              "type": "null"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "type",
                            "field",
                            "message"
                          ]
                        }
                      ]
                    },
                    "code": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "errors",
                    "code"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Не найден",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Заказ не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string"
                            },
                            "field": {
                              "type": "null"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "type",
                            "field",
                            "message"
                          ]
                        }
                      ]
                    },
                    "code": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "errors",
                    "code"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Обновление данных заказа",
        "tags": [
          "Checkout V3"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "description": "Номер заказа",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Обновление заказа",
            "examples": {
              "application/json": {
                "order": {
                  "id": 130,
                  "number": "T20561",
                  "total": 0,
                  "promo_total": 0,
                  "total_discount": 0,
                  "item_count": 0,
                  "shipping_method_kind": "by_courier",
                  "total_weight": 0,
                  "shipping_methods": [
                    "by_courier",
                    "pickup"
                  ],
                  "is_alcohol": false,
                  "contacts": {
                    "normalized_phone": "+7 495 111-22-33",
                    "phone": "74951112233",
                    "email": "new@email.com"
                  },
                  "payments": [],
                  "replacement_policy": {
                    "id": 59,
                    "description": "translation missing: ru.spree.replacement_policy_descriptions.desktop.call82"
                  },
                  "payment_tool": null,
                  "address": {
                    "id": 165,
                    "first_name": "Ivan",
                    "last_name": "Fedorov",
                    "full_address": "Москва, 120th street, 56 c.3, 1",
                    "city": "Москва",
                    "street": "120th street",
                    "building": "56 c.3",
                    "block": "1",
                    "entrance": "1",
                    "floor": "1",
                    "apartment": "1",
                    "comments": null,
                    "lat": 5,
                    "lon": 5,
                    "kind": null,
                    "door_phone": "1",
                    "delivery_to_door": true
                  },
                  "shipments": [
                    {
                      "id": 102,
                      "cost": 0,
                      "promo": 0,
                      "discount": 0,
                      "number": "H33378782640",
                      "is_alcohol": false,
                      "item_total": 0,
                      "items_quantity": 0,
                      "alerts": [],
                      "total_weight": 0,
                      "checkout": true,
                      "item_count": 0,
                      "store": {
                        "id": 153,
                        "time_zone": "Europe/Moscow",
                        "on_demand": false,
                        "express_delivery": false,
                        "local_date": "2022-03-25"
                      },
                      "shipping_rate": null,
                      "delivery_window": null,
                      "retailer": {
                        "id": 145,
                        "name": "METRO1227",
                        "slug": "metro1227",
                        "color": "#003d7a",
                        "logo_background_color": "#003d7a",
                        "logo": "",
                        "available": true,
                        "environment": "production",
                        "retailer_agreement": {
                          "agreement_type": "oferta_b",
                          "url": "/oferta_b"
                        }
                      }
                    }
                  ],
                  "promotion_codes": []
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "order": {
                      "$ref": "#/components/schemas/order"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": {
                  "status": "401",
                  "title": "Failed to Login"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string"
                        },
                        "title": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "status",
                        "title"
                      ]
                    }
                  },
                  "required": [
                    "errors"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Нет доступа",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "forbidden",
                    "field": null,
                    "message": "Пользователь не может выполнить это действие"
                  }
                ],
                "code": 403
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string"
                            },
                            "field": {
                              "type": "null"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "type",
                            "field",
                            "message"
                          ]
                        }
                      ]
                    },
                    "code": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "errors",
                    "code"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Не найден",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Заказ не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string"
                            },
                            "field": {
                              "type": "null"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "type",
                            "field",
                            "message"
                          ]
                        }
                      ]
                    },
                    "code": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "errors",
                    "code"
                  ]
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "order": {
                    "type": "object",
                    "description": "Данные заказа"
                  },
                  "shipment_numbers": {
                    "type": "array",
                    "description": "Номера шипментов, которые сейчас на оформлении",
                    "items": {
                      "type": "string",
                      "example": "H123456789"
                    }
                  }
                },
                "required": [
                  "order",
                  "shipment_numbers"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/checkout/orders/{number}/initialization": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        }
      ],
      "post": {
        "summary": "Инициализация чекаута",
        "tags": [
          "Checkout V3"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "description": "Номер заказа",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Информация по заказу",
            "examples": {
              "application/json": null
            },
            "content": {}
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": {
                  "status": "401",
                  "title": "Failed to Login"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string"
                        },
                        "title": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "status",
                        "title"
                      ]
                    }
                  },
                  "required": [
                    "errors"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Нет доступа",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "forbidden",
                    "field": null,
                    "message": "Пользователь не может выполнить это действие"
                  }
                ],
                "code": 403
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string"
                            },
                            "field": {
                              "type": "null"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "type",
                            "field",
                            "message"
                          ]
                        }
                      ]
                    },
                    "code": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "errors",
                    "code"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Не найден",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Заказ не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string"
                            },
                            "field": {
                              "type": "null"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "type",
                            "field",
                            "message"
                          ]
                        }
                      ]
                    },
                    "code": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "errors",
                    "code"
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Заказ не валиден",
            "examples": {
              "application/json": {
                "type": "unavailable_ship_address",
                "title": "Указанный адрес не входит в зону доставки магазина METRO1251, 221th street. Обновите адрес доставки.",
                "status": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "status": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "type",
                    "title",
                    "status"
                  ]
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "shipment_numbers": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "example": "H123456789"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/checkout/orders/{number}/validation": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        }
      ],
      "get": {
        "summary": "Валидация чекаута",
        "tags": [
          "Checkout V3"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "description": "Номер заказа",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Заказ готов к оформлению",
            "examples": {
              "application/json": null
            },
            "content": {}
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": {
                  "status": "401",
                  "title": "Failed to Login"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string"
                        },
                        "title": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "status",
                        "title"
                      ]
                    }
                  },
                  "required": [
                    "errors"
                  ]
                }
              }
            }
          },
          "403": {
            "description": "Нет доступа",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "forbidden",
                    "field": null,
                    "message": "Пользователь не может выполнить это действие"
                  }
                ],
                "code": 403
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string"
                            },
                            "field": {
                              "type": "null"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "type",
                            "field",
                            "message"
                          ]
                        }
                      ]
                    },
                    "code": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "errors",
                    "code"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Не найден",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Заказ не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string"
                            },
                            "field": {
                              "type": "null"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "type",
                            "field",
                            "message"
                          ]
                        }
                      ]
                    },
                    "code": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "errors",
                    "code"
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Заказ не валиден",
            "examples": {
              "application/json": {
                "type": "unavailable_ship_address",
                "title": "Указанный адрес не входит в зону доставки магазина METRO1266, 222th street. Обновите адрес доставки.",
                "status": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "status": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "type",
                    "title",
                    "status"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/checkout/replacement_policies": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        }
      ],
      "get": {
        "summary": "Получение способов замены",
        "tags": [
          "Checkout V3"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Список способов замены",
            "examples": {
              "application/json": {
                "replacement_policies": [
                  {
                    "id": 63,
                    "description": "Не звонить мне. Убрать из заказа"
                  }
                ]
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "replacement_policies": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "integer"
                            },
                            "description": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "id",
                            "description"
                          ]
                        }
                      ]
                    }
                  },
                  "required": [
                    "replacement_policies"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/checkout/shipments/{shipment_number}/shipping_rates": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        }
      ],
      "get": {
        "summary": "Получение слотов доставки",
        "tags": [
          "Checkout V3"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "name": "shipment_number",
            "in": "path",
            "description": "Номер шипмента",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Список слотов",
            "examples": {
              "application/json": {
                "shipping_rates": [
                  {
                    "total_value": 490,
                    "value": 490,
                    "is_boost": false,
                    "is_drop": false,
                    "is_free": false,
                    "is_express_delivery": false,
                    "delivery_window": {
                      "id": 124,
                      "starts_at": "2022-03-25T06:00:00.000+03:00",
                      "ends_at": "2022-03-25T06:00:00.000+03:00",
                      "weight_balance": 400000,
                      "items_count_balance": 300,
                      "kind": "courier",
                      "delivery_forecast_text": null,
                      "estimate_source": "one_hour_slot",
                      "estimate_minutes_min": 60,
                      "estimate_minutes_max": 60,
                      "lifetime": null,
                      "is_express_delivery": false,
                      "available_for_tinkoff_dolyame": true,
                      "time_zone": "Europe/Moscow",
                      "human_interval": "06:00–06:00",
                      "date": "2022-03-25",
                      "available": true
                    }
                  }
                ],
                "meta": {
                  "available_days": [
                    "2022-03-25",
                    "2022-03-26"
                  ]
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "shipping_rates": {
                      "type": "array",
                      "items": [
                        {
                          "type": "object",
                          "properties": {
                            "total_value": {
                              "type": "number"
                            },
                            "value": {
                              "type": "number"
                            },
                            "is_boost": {
                              "type": "boolean"
                            },
                            "is_drop": {
                              "type": "boolean"
                            },
                            "is_free": {
                              "type": "boolean"
                            },
                            "is_express_delivery": {
                              "type": "boolean"
                            },
                            "delivery_window": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer"
                                },
                                "starts_at": {
                                  "type": "string"
                                },
                                "ends_at": {
                                  "type": "string"
                                },
                                "weight_balance": {
                                  "type": "integer"
                                },
                                "items_count_balance": {
                                  "type": "integer"
                                },
                                "kind": {
                                  "type": "string"
                                },
                                "delivery_forecast_text": {
                                  "type": null
                                },
                                "estimate_source": {
                                  "type": "string"
                                },
                                "estimate_minutes_min": {
                                  "type": "integer"
                                },
                                "estimate_minutes_max": {
                                  "type": "integer"
                                },
                                "lifetime": {
                                  "type": null
                                },
                                "is_express_delivery": {
                                  "type": "boolean"
                                },
                                "available_for_tinkoff_dolyame": {
                                  "type": "boolean"
                                },
                                "time_zone": {
                                  "type": "string"
                                },
                                "human_interval": {
                                  "type": "string"
                                }
                              }
                            }
                          }
                        }
                      ]
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "available_days": {
                          "type": "array",
                          "items": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "string"
                            }
                          ]
                        }
                      }
                    }
                  },
                  "required": [
                    "shipping_rates",
                    "meta"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/current_time": {
      "get": {
        "summary": "Текущее серверное время",
        "tags": [
          "CurrentServerTime"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Получение серверного времени",
            "examples": {
              "application/json": {
                "current_time": "2022-03-25T13:41:43.534+03:00"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "current_time": {
                      "type": "string",
                      "description": "Текущее серверное время",
                      "example": "2021-05-13T10:24:23.802+03:00"
                    }
                  },
                  "required": [
                    "current_time"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/departments": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/client_token"
        },
        {
          "$ref": "#/components/parameters/session_token"
        },
        {
          "$ref": "#/components/parameters/store_id"
        },
        {
          "name": "offers_limit",
          "in": "query",
          "description": "Ограничение по числу продуктов в категориях",
          "schema": {
            "type": "integer"
          }
        }
      ],
      "get": {
        "summary": "Получение списка департаментов",
        "tags": [
          "Департаменты"
        ],
        "responses": {
          "200": {
            "description": "Список департаментов",
            "examples": {
              "application/json": {
                "promo_badges": [
                  {
                    "id": 1,
                    "type": "sberprime",
                    "attributes": {
                      "name": "sberprime",
                      "options": {
                        "active": {
                          "title": "-10% со СберПрайм",
                          "title_short": "-10%",
                          "tooltip": "На товар есть скидка по промокоду PRIME",
                          "url": "https://instamart.ru/metro/c/tolko-dlia-podpischikov-praim?sid=181",
                          "button_text": "Все товары со скидкой"
                        },
                        "inactive": {
                          "title": "-10% со СберПрайм",
                          "title_short": "-10%",
                          "tooltip": "Скидка на этот и сотни других товаров — для подписчиков СберПрайм",
                          "url": "https://sberbank.ru/sms/prime?utm_source=sbermarket&utm_medium=badgesweb&utm_campaign=prime",
                          "button_text": "Узнать про подписку"
                        }
                      }
                    }
                  }
                ],
                "favorite_products": null,
                "deals": null,
                "purchased": null,
                "departments": [
                  {
                    "id": 283,
                    "type": "taxon",
                    "name": "Чай",
                    "slug": "chai",
                    "products_count": 1,
                    "icon_url": null,
                    "products": [
                      {
                        "id": "0000000408",
                        "legacy_offer_id": 305,
                        "legacy_product_id": 302,
                        "sku": "20669",
                        "retailer_sku": "0000000408",
                        "name": "Ахмад",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "akhmad",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20669-akhmad",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [
                          1
                        ],
                        "image_urls": [],
                        "requirements": []
                      }
                    ]
                  }
                ],
                "meta": {
                  "current_page": 1,
                  "total_pages": 1,
                  "per_page": 10,
                  "total_count": 1
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "departments": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/department"
                      }
                    },
                    "promo_badges": {
                      "description": "Список бейджей",
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/promo_badge"
                      }
                    }
                  }
                }
              }
            }
          },
          "ok": {
            "description": "Список департаментов",
            "examples": {
              "application/json": {
                "promo_badges": [],
                "favorite_products": null,
                "deals": null,
                "purchased": {
                  "type": "taxon",
                  "name": "Вы покупали ранее",
                  "slug": "buy-again",
                  "products_count": 1,
                  "icon_url": null,
                  "products": [
                    {
                      "id": "0000000364",
                      "legacy_offer_id": 261,
                      "legacy_product_id": 261,
                      "sku": "20628",
                      "retailer_sku": "0000000364",
                      "name": "Product #275",
                      "price": 1000,
                      "original_price": 1000,
                      "discount": 0,
                      "human_volume": "100 г.",
                      "volume": 100,
                      "volume_type": "weight",
                      "items_per_pack": 1,
                      "discount_ends_at": null,
                      "slug": "product-275",
                      "max_select_quantity": 999,
                      "canonical_url": "https://instamart.ru/products/20628-product-275",
                      "available": true,
                      "vat_info": null,
                      "promo_badge_ids": [],
                      "image_urls": [],
                      "requirements": []
                    }
                  ]
                },
                "departments": [
                  {
                    "id": 223,
                    "type": "taxon",
                    "name": "Чай",
                    "slug": "chai",
                    "products_count": 6,
                    "icon_url": null,
                    "products": [
                      {
                        "id": "0000000354",
                        "legacy_offer_id": 251,
                        "legacy_product_id": 251,
                        "sku": "20617",
                        "retailer_sku": "0000000354",
                        "name": "Ахмад",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "akhmad",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20617-akhmad",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [],
                        "image_urls": [],
                        "requirements": []
                      },
                      {
                        "id": "0000000359",
                        "legacy_offer_id": 256,
                        "legacy_product_id": 256,
                        "sku": "20622",
                        "retailer_sku": "0000000359",
                        "name": "Product #270",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "product-270",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20622-product-270",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [],
                        "image_urls": [],
                        "requirements": []
                      },
                      {
                        "id": "0000000360",
                        "legacy_offer_id": 257,
                        "legacy_product_id": 257,
                        "sku": "20623",
                        "retailer_sku": "0000000360",
                        "name": "Product #271",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "product-271",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20623-product-271",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [],
                        "image_urls": [],
                        "requirements": []
                      },
                      {
                        "id": "0000000361",
                        "legacy_offer_id": 258,
                        "legacy_product_id": 258,
                        "sku": "20624",
                        "retailer_sku": "0000000361",
                        "name": "Product #272",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "product-272",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20624-product-272",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [],
                        "image_urls": [],
                        "requirements": []
                      },
                      {
                        "id": "0000000362",
                        "legacy_offer_id": 259,
                        "legacy_product_id": 259,
                        "sku": "20625",
                        "retailer_sku": "0000000362",
                        "name": "Product #273",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "product-273",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20625-product-273",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [],
                        "image_urls": [],
                        "requirements": []
                      },
                      {
                        "id": "0000000363",
                        "legacy_offer_id": 260,
                        "legacy_product_id": 260,
                        "sku": "20626",
                        "retailer_sku": "0000000363",
                        "name": "Product #274",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "product-274",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20626-product-274",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [],
                        "image_urls": [],
                        "requirements": []
                      }
                    ]
                  },
                  {
                    "id": 227,
                    "type": "department",
                    "name": "Крепкий алкоголь",
                    "slug": "kriepkii-alkoghol",
                    "products_count": 1,
                    "icon_url": null,
                    "products": [
                      {
                        "id": "0000000357",
                        "legacy_offer_id": 254,
                        "legacy_product_id": 254,
                        "sku": "20620",
                        "retailer_sku": "0000000357",
                        "name": "Jameson",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "jameson",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20620-jameson",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [],
                        "image_urls": [],
                        "requirements": []
                      }
                    ]
                  },
                  {
                    "id": 229,
                    "type": "taxon",
                    "name": "Вино",
                    "slug": "vino",
                    "products_count": 1,
                    "icon_url": null,
                    "products": [
                      {
                        "id": "0000000355",
                        "legacy_offer_id": 252,
                        "legacy_product_id": 252,
                        "sku": "20618",
                        "retailer_sku": "0000000355",
                        "name": "Монастырское",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "monastyrskoie",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20618-monastyrskoie",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [],
                        "image_urls": [],
                        "requirements": []
                      }
                    ]
                  }
                ],
                "meta": {
                  "current_page": 1,
                  "total_pages": 1,
                  "per_page": 10,
                  "total_count": 3
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "departments": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/department"
                      }
                    },
                    "promo_badges": {
                      "description": "Список бейджей",
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/promo_badge"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/departments/{id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/client_token"
        }
      ],
      "get": {
        "summary": "Получение информации о категории",
        "tags": [
          "Департаменты"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/store_id"
          },
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID категории",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "offers_limit",
            "in": "query",
            "description": "Ограничение по числу продуктов в подкатегориях",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Страница подкатегорий (пагинация)",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "description": "Число подкатегорий на странице (пагинация)",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Информация о категории",
            "examples": {
              "application/json": {
                "promo_badges": [],
                "favorite_products": null,
                "department": {
                  "id": 344,
                  "type": "department",
                  "name": "Бакалея",
                  "slug": "produkty-pitaniia/bakalieia",
                  "products_count": 1,
                  "icon_url": null
                },
                "departments": [
                  {
                    "id": 343,
                    "type": "taxon",
                    "name": "Чай",
                    "slug": "chai",
                    "products_count": 1,
                    "icon_url": null,
                    "products": [
                      {
                        "id": "0000000443",
                        "legacy_offer_id": 340,
                        "legacy_product_id": 337,
                        "sku": "20704",
                        "retailer_sku": "0000000443",
                        "name": "Ахмад",
                        "price": 1236.7,
                        "original_price": 1236.7,
                        "discount": 0,
                        "human_volume": "100 г.",
                        "volume": 100,
                        "volume_type": "weight",
                        "items_per_pack": 1,
                        "discount_ends_at": null,
                        "slug": "akhmad",
                        "max_select_quantity": 999,
                        "canonical_url": "https://instamart.ru/products/20704-akhmad",
                        "available": true,
                        "vat_info": null,
                        "promo_badge_ids": [],
                        "image_urls": [],
                        "requirements": []
                      }
                    ]
                  }
                ],
                "meta": {
                  "current_page": 1,
                  "total_pages": 1,
                  "per_page": 25,
                  "total_count": 1
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "department": {
                      "$ref": "#/components/schemas/department"
                    },
                    "promo_badges": {
                      "description": "Список бейджей",
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/promo_badge"
                      }
                    }
                  }
                }
              }
            }
          },
          "ok": {
            "description": "Информация о категории",
            "examples": {
              "application/json": {
                "promo_badges": [],
                "favorite_products": null,
                "department": {
                  "id": 332,
                  "type": "department",
                  "name": "Бакалея",
                  "slug": "produkty-pitaniia/bakalieia",
                  "products_count": 1,
                  "icon_url": null
                },
                "departments": [],
                "meta": {
                  "current_page": 2,
                  "total_pages": 1,
                  "per_page": 1,
                  "total_count": 1
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "departments": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/department"
                      }
                    },
                    "promo_badges": {
                      "description": "Список бейджей",
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/promo_badge"
                      }
                    },
                    "department": {
                      "$ref": "#/components/schemas/department"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/favorites_list/items": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        },
        {
          "$ref": "#/components/parameters/store_id"
        }
      ],
      "get": {
        "summary": "Список избранного пользователя",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Избранные товары"
        ],
        "parameters": [
          {
            "name": "retailer_skus",
            "description": "Список retailer_sku продуктов через запятую",
            "example": "1,2,45,234,45,3",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Список избранного пользователя",
            "examples": {
              "application/json": {
                "retailer_skus": [
                  "0000000453"
                ]
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "retailer_skus": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "description": "retailer SKU оффера"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Добавить позицию в список избранного пользователя",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Избранные товары"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Добавленная позиция избранного",
            "examples": {
              "application/json": {
                "item": {
                  "id": 5,
                  "name": "Product #309",
                  "sku": "20717",
                  "product_id": 350,
                  "product": {
                    "id": "0000000456",
                    "legacy_offer_id": 353,
                    "legacy_product_id": 350,
                    "sku": "20717",
                    "retailer_sku": "0000000456",
                    "name": "Product #309",
                    "price": 1236.7,
                    "original_price": 1236.7,
                    "discount": 0,
                    "human_volume": "100 г",
                    "volume": 100,
                    "volume_type": "weight",
                    "items_per_pack": 1,
                    "discount_ends_at": null,
                    "slug": "product-309",
                    "max_select_quantity": 999,
                    "canonical_url": "https://instamart.ru/products/20717-product-309",
                    "available": true,
                    "vat_info": null,
                    "promo_badge_ids": [],
                    "image_urls": [],
                    "requirements": []
                  },
                  "image": null
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "item": {
                    "$ref": "#/components/schemas/favorite_list_item"
                  }
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "item": {
                    "type": "object",
                    "properties": {
                      "retailer_sku": {
                        "type": "integer",
                        "description": "retailer_sku продукта",
                        "example": "1"
                      }
                    },
                    "required": [
                      "retailer_sku"
                    ]
                  }
                },
                "required": [
                  "item"
                ]
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Добавить/удалить позицию в списке избранного пользователя",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Избранные товары"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Добавленная позиция избранного",
            "examples": {
              "application/json": null
            },
            "content": {
              "application/json": {
                "schema": {
                  "item": {
                    "$ref": "#/components/schemas/favorite_list_item"
                  }
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "item": {
                    "type": "object",
                    "properties": {
                      "retailer_sku": {
                        "type": "integer",
                        "description": "retailer_sku продукта",
                        "example": "1"
                      },
                      "is_favorite": {
                        "type": "boolean",
                        "description": "Добавить или убрать продукт из списка избранного"
                      }
                    },
                    "required": [
                      "retailer_sku",
                      "is_favorite"
                    ]
                  }
                },
                "required": [
                  "item"
                ]
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/favorites_list/items/{retailer_sku}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        },
        {
          "$ref": "#/components/parameters/store_id"
        }
      ],
      "delete": {
        "summary": "Удалить позицию из списка избранного пользователя",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Избранные товары"
        ],
        "parameters": [
          {
            "name": "retailer_sku",
            "in": "path",
            "required": true,
            "description": "SKU продукта",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Успешное удаление позиции из списка избранного пользователя",
            "examples": {
              "application/json": null
            },
            "content": {}
          }
        }
      }
    },
    "/api/feature_flags": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        }
      ],
      "get": {
        "summary": "Получение списка фича-флагов",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Feature flags"
        ],
        "responses": {
          "ok": {
            "description": "Список фич-флагов",
            "examples": {
              "application/json": {
                "feature_flags": [
                  {
                    "name": "top_carousel_image_banner",
                    "enabled": false
                  },
                  {
                    "name": "new_category_banners_main",
                    "enabled": false
                  },
                  {
                    "name": "new_recommendations_main_page",
                    "enabled": false
                  },
                  {
                    "name": "new_recommendations_not_found_page",
                    "enabled": false
                  },
                  {
                    "name": "new_recommendations_product_card",
                    "enabled": false
                  },
                  {
                    "name": "shipment_status_polling_v2",
                    "enabled": false
                  },
                  {
                    "name": "new_category_banners_store",
                    "enabled": false
                  },
                  {
                    "name": "transfer_session",
                    "enabled": false
                  },
                  {
                    "name": "transfer_cart",
                    "enabled": false
                  },
                  {
                    "name": "prereplacements",
                    "enabled": false
                  },
                  {
                    "name": "show_only_available_delivery_windows_on_checkout",
                    "enabled": false
                  },
                  {
                    "name": "fetch_menu_categories_initially",
                    "enabled": false
                  },
                  {
                    "name": "android_flat_catalog_v2",
                    "enabled": false
                  },
                  {
                    "name": "ios_flat_catalog_v2",
                    "enabled": false
                  },
                  {
                    "name": "is_sms_retriever_enabled_android",
                    "enabled": false
                  },
                  {
                    "name": "checkout_web_new",
                    "enabled": false
                  },
                  {
                    "name": "facebook_auth_enabled",
                    "enabled": false
                  },
                  {
                    "name": "eta_block_without_cart_android",
                    "enabled": false
                  },
                  {
                    "name": "eta_block_with_cart_android",
                    "enabled": false
                  },
                  {
                    "name": "is_native_products_list_android",
                    "enabled": false
                  },
                  {
                    "name": "multiretailer_ios",
                    "enabled": false
                  },
                  {
                    "name": "multiretailer_android",
                    "enabled": false
                  },
                  {
                    "name": "android_account_addresses",
                    "enabled": false
                  },
                  {
                    "name": "android_facebook_auth",
                    "enabled": false
                  },
                  {
                    "name": "pre_replacements_ios",
                    "enabled": false
                  },
                  {
                    "name": "pre_replacements_android",
                    "enabled": false
                  }
                ]
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "feature_flags": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/feature_flag"
                      }
                    }
                  },
                  "required": [
                    "feature_flags"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/feature_flags/{name}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        },
        {
          "name": "name",
          "in": "path",
          "description": "Ключ фича флага",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "Получение фича-флага по ключу",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Feature flags"
        ],
        "responses": {
          "not_found": {
            "description": "Фиче-флаг не найден",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "ActiveRecord::RecordNotFound"
                  }
                ],
                "code": 404
              }
            },
            "content": {}
          },
          "ok": {
            "description": "Фиче-флаг получен",
            "examples": {
              "application/json": {
                "feature_flag": {
                  "name": "pre_replacements_android",
                  "enabled": true
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "feature_flag": {
                      "$ref": "#/components/schemas/feature_flag"
                    }
                  },
                  "required": [
                    "feature_flag"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/marketing_categories/{marketing_category_id}/products": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        }
      ],
      "get": {
        "summary": "Получение списка продуктов категории",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Маркетинговые категории"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/store_id"
          },
          {
            "name": "marketing_category_id",
            "in": "path",
            "description": "ID маркетинговой категории",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Список продуктов маркетинговой категории",
            "examples": {
              "application/json": {
                "products": [
                  {
                    "id": "0000000467",
                    "legacy_offer_id": 365,
                    "legacy_product_id": 360,
                    "sku": "20727",
                    "retailer_sku": "0000000467",
                    "name": "Product #319",
                    "price": 1236.7,
                    "original_price": 1236.7,
                    "discount": 0,
                    "human_volume": "100 г",
                    "volume": 100,
                    "volume_type": "weight",
                    "items_per_pack": 1,
                    "discount_ends_at": null,
                    "price_type": "per_kilo",
                    "grams_per_unit": 500,
                    "unit_price": 1236.7,
                    "original_unit_price": 1236.7,
                    "slug": "product-319",
                    "max_select_quantity": 999,
                    "canonical_url": "https://instamart.ru/products/20727-product-319",
                    "available": true,
                    "vat_info": null,
                    "promo_badge_ids": [
                      1
                    ],
                    "image_urls": [],
                    "requirements": []
                  }
                ],
                "meta": {
                  "current_page": 1,
                  "next_page": null,
                  "total_pages": 1,
                  "per_page": 20,
                  "total_count": 1
                },
                "promo_badges": [
                  {
                    "id": 1,
                    "type": "sberprime",
                    "attributes": {
                      "name": "sberprime",
                      "options": {
                        "active": {
                          "title": "-10% со СберПрайм",
                          "title_short": "-10%",
                          "tooltip": "На товар есть скидка по промокоду PRIME",
                          "url": "https://instamart.ru/metro/c/tolko-dlia-podpischikov-praim?sid=204",
                          "button_text": "Все товары со скидкой"
                        },
                        "inactive": {
                          "title": "-10% со СберПрайм",
                          "title_short": "-10%",
                          "tooltip": "Скидка на этот и сотни других товаров — для подписчиков СберПрайм",
                          "url": "https://sberbank.ru/sms/prime?utm_source=sbermarket&utm_medium=badgesweb&utm_campaign=prime",
                          "button_text": "Узнать про подписку"
                        }
                      }
                    }
                  }
                ]
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "products",
                    "promo_badges"
                  ],
                  "properties": {
                    "products": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/offer"
                      }
                    },
                    "promo_badges": {
                      "description": "Список бейджей",
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/promo_badge"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/marketing_categories": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        }
      ],
      "get": {
        "summary": "Получение списка маркетинговых категорий",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Маркетинговые категории"
        ],
        "responses": {
          "ok": {
            "description": "Список маркетинговых категорий",
            "examples": {
              "application/json": {
                "marketing_categories": [
                  {
                    "id": 3,
                    "name": "Маркетинговая категория №2",
                    "slug": "mega-category-2",
                    "banner_url": null
                  }
                ]
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "marketing_categories": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/marketing_category"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/marketing_categories/{id}": {
      "get": {
        "summary": "Получение маркетинговой категории",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Маркетинговые категории"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "id",
            "in": "path",
            "description": "ID категории",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "ok": {
            "description": "Маркетинговая категория",
            "examples": {
              "application/json": {
                "marketing_category": {
                  "id": 5,
                  "name": "Маркетинговая категория №4",
                  "slug": "mega-category-4",
                  "banner_url": null
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "marketing_category": {
                      "$ref": "#/components/schemas/marketing_category"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/notifications": {
      "post": {
        "summary": "Отправка события",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Событие обработано",
            "examples": {
              "application/json": null
            },
            "content": {}
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {}
          },
          "422": {
            "description": "Требуемые данные отсутствуют или некорректны",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unprocessable_entity",
                    "field": "event",
                    "message": {
                      "type": [
                        "отсутствует"
                      ]
                    }
                  }
                ]
              }
            },
            "content": {}
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "event": {
                    "description": "Событие",
                    "oneOf": [
                      {
                        "$ref": "#/components/schemas/paid_order_event"
                      }
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "Тип события",
                        "example": "order.paid",
                        "maxLength": 255
                      },
                      "payload": {
                        "type": "object",
                        "description": "Параметры события",
                        "properties": {
                          "order_id": {
                            "type": "string",
                            "description": "Идентификатор заказа в формате \"retailer_slug:uuid\"",
                            "example": "metro:order_uuid",
                            "maxLength": 255
                          }
                        }
                      }
                    }
                  }
                },
                "required": [
                  "event"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/order_options/delivery": {
      "put": {
        "summary": "Возвращает возможные опции заказа для доставки",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Данные валидны",
            "examples": {
              "application/json": {
                "optionals": [],
                "store_id": "068818ea-e593-40b3-ba7a-63afe7897335",
                "payment_methods": [
                  {
                    "type": "cash",
                    "title": "Check",
                    "options": [
                      {
                        "id": "ebYiTcoBVipyEPqQc82gBhpPXtKco+kVLV8a2Sl/xv0=",
                        "name": "Наличными курьеру"
                      }
                    ]
                  }
                ],
                "shipping_methods": [
                  {
                    "type": "by_courier",
                    "options": [
                      {
                        "id": "by_courier:170832e5-1885-43f5-9b5e-2a538a618a43",
                        "price": 49000,
                        "original_price": 49000,
                        "starts_at": "2022-03-25T14:42:04.000+03:00",
                        "ends_at": "2022-03-25T14:42:04.000+03:00"
                      }
                    ]
                  }
                ],
                "replacement_options": []
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/order_options_response"
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "422": {
            "description": "Требуемые данные отсутствуют или некорректны",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "items",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "items",
                    "message": "не может быть пустым"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "retailer_id": {
                    "type": "string",
                    "description": "Идентификатор ритейлера",
                    "example": "metro",
                    "maxLength": 255
                  },
                  "location": {
                    "type": "object",
                    "description": "Координаты доставки",
                    "properties": {
                      "lon": {
                        "type": "number",
                        "description": "Долгота",
                        "example": 37.640354,
                        "minimum": -180,
                        "maximum": 180
                      },
                      "lat": {
                        "type": "number",
                        "description": "Широта",
                        "example": 55.761208,
                        "minimum": -90,
                        "maximum": 90
                      }
                    },
                    "required": [
                      "lon",
                      "lat"
                    ]
                  },
                  "items": {
                    "type": "array",
                    "description": "Товары",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "SKU ритейлера",
                          "example": "0000000002",
                          "maxLength": 255
                        },
                        "quantity": {
                          "type": "integer",
                          "description": "Количество",
                          "example": 2,
                          "minimum": 1,
                          "maximum": 2147483647
                        },
                        "weight": {
                          "type": "integer",
                          "description": "Вес единицы весового товара в граммах",
                          "example": 800,
                          "minimum": 1,
                          "maximum": 2147483647
                        },
                        "price": {
                          "type": "integer",
                          "description": "Цена в копейках, обязательна, если клиент может передавать свои цены",
                          "example": 123670,
                          "minimum": 1,
                          "maximum": 99999999
                        },
                        "price_per_kilo": {
                          "type": "integer",
                          "description": "Цена за кг весового товара в копейках, обязательна, если клиент может передавать свои цены и передан вес",
                          "example": 123670,
                          "minimum": 1,
                          "maximum": 99999999
                        },
                        "discount": {
                          "type": "number",
                          "description": "Скидка",
                          "example": 47200,
                          "minimum": 0,
                          "maximum": 999999.99
                        }
                      },
                      "required": [
                        "id",
                        "quantity"
                      ]
                    }
                  }
                },
                "required": [
                  "retailer_id",
                  "location",
                  "items"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/order_options/pickup_from_store": {
      "put": {
        "summary": "Возвращает возможные опции заказа для самовывоза",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Данные валидны",
            "examples": {
              "application/json": {
                "optionals": [],
                "store_id": "0628ef84-7dee-4955-a72d-a16ae7383ed8",
                "payment_methods": [],
                "shipping_methods": [
                  {
                    "type": "pickup",
                    "options": [
                      {
                        "id": "pickup:8370e4f7-88e1-45d9-98a7-b767417bd538",
                        "price": 49000,
                        "original_price": 49000,
                        "starts_at": "2022-03-25T14:42:07.000+03:00",
                        "ends_at": "2022-03-25T14:42:07.000+03:00"
                      }
                    ]
                  }
                ],
                "replacement_options": []
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/order_options_response"
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "422": {
            "description": "Требуемые данные отсутствуют или некорректны",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "items",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "items",
                    "message": "не может быть пустым"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "retailer_id": {
                    "type": "string",
                    "description": "Идентификатор ритейлера",
                    "example": "metro",
                    "maxLength": 255
                  },
                  "store_id": {
                    "type": "string",
                    "description": "Идентификатор магазина",
                    "example": "c158f834-b944-4c84-9165-65f311e6aed4",
                    "maxLength": 255
                  },
                  "items": {
                    "type": "array",
                    "description": "Товары",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "SKU ритейлера",
                          "example": "0000000002",
                          "maxLength": 255
                        },
                        "quantity": {
                          "type": "integer",
                          "description": "Количество",
                          "example": 2,
                          "minimum": 1,
                          "maximum": 2147483647
                        },
                        "weight": {
                          "type": "integer",
                          "description": "Вес единицы весового товара в граммах",
                          "example": 800,
                          "minimum": 1,
                          "maximum": 2147483647
                        },
                        "price": {
                          "type": "integer",
                          "description": "Цена в копейках, обязательна, если клиент может передавать свои цены",
                          "example": 123670,
                          "minimum": 1,
                          "maximum": 99999999
                        },
                        "price_per_kilo": {
                          "type": "integer",
                          "description": "Цена за кг весового товара в копейках, обязательна, если клиент может передавать свои цены и передан вес",
                          "example": 123670,
                          "minimum": 1,
                          "maximum": 99999999
                        },
                        "discount": {
                          "type": "number",
                          "description": "Скидка",
                          "example": 47200,
                          "minimum": 0,
                          "maximum": 999999.99
                        }
                      },
                      "required": [
                        "id",
                        "quantity"
                      ]
                    }
                  }
                },
                "required": [
                  "retailer_id",
                  "store_id",
                  "items"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/orders/{order_id}/mergeable": {
      "post": {
        "summary": "Проверка возможности заказа",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "order_id",
            "in": "path",
            "description": "Идентификатор заказа",
            "example": "metro:3a4cf54d-64fb-451b-937b-00becf620d98",
            "schema": {
              "type": "string",
              "maxLength": 255
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Информация о возможности дозаказа",
            "examples": {
              "application/json": {
                "merge_possible": false,
                "impossibility_reasons": [
                  {
                    "code": "invalid_shipment_state_pending",
                    "title": "Invalid shipment state pending",
                    "details": "Shipment should have 'ready' state, but it 'pending'"
                  }
                ],
                "delivery_cost": 490,
                "delivery_time": {
                  "starts_at": "2022-03-26T09:00:00.000+03:00",
                  "ends_at": "2022-03-26T12:00:00.000+03:00"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/merge_items_response"
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "404": {
            "description": "Заказа с таким uuid не существует",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Заказ не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {}
          },
          "422": {
            "description": "Прередан запрос не соответствующий контракту",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "offers",
                    "message": "cannot find offers with id: 0000000485_suffix"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object",
                    "properties": {
                      "items": {
                        "type": "array",
                        "description": "Товары",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "description": "SKU товара",
                              "example": "0000000002",
                              "maxLength": 255
                            },
                            "quantity": {
                              "type": "integer",
                              "description": "Количество",
                              "example": 2,
                              "minimum": 1,
                              "maximum": 2147483647
                            }
                          },
                          "required": [
                            "id",
                            "quantity"
                          ]
                        }
                      }
                    }
                  }
                },
                "required": [
                  "data"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/orders/{order_id}/merge_items": {
      "post": {
        "summary": "Выполнение дозаказа",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "order_id",
            "in": "path",
            "description": "Идентификатор заказа",
            "example": "metro:3a4cf54d-64fb-451b-937b-00becf620d98",
            "schema": {
              "type": "string",
              "maxLength": 255
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Информация о возможности дозаказа",
            "examples": {
              "application/json": {
                "merge_possible": false,
                "impossibility_reasons": [
                  {
                    "code": "invalid_shipment_state_pending",
                    "title": "Invalid shipment state pending",
                    "details": "Shipment should have 'ready' state, but it 'pending'"
                  }
                ],
                "delivery_cost": 490,
                "delivery_time": {
                  "starts_at": "2022-03-26T09:00:00.000+03:00",
                  "ends_at": "2022-03-26T12:00:00.000+03:00"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/merge_items_response"
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "422": {
            "description": "Прередан запрос не соответствующий контракту",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "items",
                    "message": "price not passed",
                    "sku": "0000000493"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object",
                    "properties": {
                      "items": {
                        "type": "array",
                        "description": "Товары",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "description": "SKU товара",
                              "example": "0000000002",
                              "maxLength": 255
                            },
                            "quantity": {
                              "type": "integer",
                              "description": "Количество",
                              "example": 2,
                              "minimum": 1,
                              "maximum": 2147483647
                            },
                            "price": {
                              "type": "integer",
                              "description": "Цена в копейках",
                              "example": 200,
                              "minimum": 1,
                              "maximum": 99999999
                            },
                            "discount": {
                              "type": "integer",
                              "description": "Скидка в копейках",
                              "example": 20,
                              "minimum": 0,
                              "maximum": 99999999
                            },
                            "promo_total": {
                              "type": "integer",
                              "description": "Сумма промо-скидки",
                              "example": 200,
                              "minimum": -2147483648,
                              "maximum": 2147483647
                            },
                            "price_per_kilo": {
                              "type": "integer",
                              "description": "Цена за кг весового товара в копейках, обязательна, если клиент может передавать свои цены и передан вес",
                              "example": 15000,
                              "minimum": 1,
                              "maximum": 99999999
                            },
                            "weight": {
                              "type": "integer",
                              "description": "Вес единицы весового товара в граммах",
                              "example": 800,
                              "minimum": 1,
                              "maximum": 2147483647
                            }
                          },
                          "required": [
                            "id",
                            "quantity"
                          ]
                        }
                      }
                    }
                  }
                },
                "required": [
                  "data"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/orders/{order_id}/status": {
      "put": {
        "summary": "Отмена заказа",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "order_id",
            "in": "path",
            "description": "Идентификатор заказа",
            "example": "metro:3a4cf54d-64fb-451b-937b-00becf620d98",
            "schema": {
              "type": "string",
              "maxLength": 255
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Отмененный заказ",
            "examples": {
              "application/json": {
                "id": "metro:a3be2df7-839f-4d50-9cc9-020f1d2b2872",
                "status": "canceled"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Идентификатор заказа",
                      "example": "metro:3a4cf54d-64fb-451b-937b-00becf620d98",
                      "maxLength": 255
                    },
                    "status": {
                      "type": "string",
                      "description": "Статус заказа",
                      "example": "canceled",
                      "maxLength": 255
                    }
                  },
                  "required": [
                    "id",
                    "status"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Отсутствует обязательный параметр",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "parameter_missing",
                    "field": "status",
                    "message": "Отсутствует обязательный параметр"
                  }
                ],
                "code": 400
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "422": {
            "description": "Прередан некорректный статус",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "status",
                    "message": "status not allowed"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "canceled"
                    ],
                    "description": "Статус заказа. Доступные значения: canceled (отмена заказа)",
                    "example": "canceled"
                  }
                },
                "required": [
                  "status"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/orders/delivery": {
      "post": {
        "summary": "Создать заказ c доставкой",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Информация по заказу",
            "examples": {
              "application/json": {
                "id": "metro1407:df5590cb-0537-4e2d-9f53-1e2440b3f699"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Идентификатор заказа",
                      "example": "metro:ab7520ac-4cff-43be-a683-71a40a658b58",
                      "maxLength": 255
                    }
                  },
                  "required": [
                    "id"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "parameter_missing",
                    "field": "order",
                    "message": "Отсутствует обязательный параметр"
                  }
                ],
                "code": 400
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "items.0.id",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "items.0.quantity",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "items.0.quantity",
                    "message": "не является числом"
                  },
                  {
                    "type": null,
                    "field": "contact.phone",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "contact.phone",
                    "message": "имеет неверное значение"
                  },
                  {
                    "type": null,
                    "field": "shipping.address",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "shipping.option_id",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "payment.option_id",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "replacement",
                    "message": "не может быть пустым"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "number": {
                    "type": "string",
                    "description": "Номер заказа",
                    "maxLength": 255,
                    "example": "ab7520ac"
                  },
                  "ship_total": {
                    "type": "integer",
                    "description": "Цена доставки в копейках",
                    "minimum": -9999999999,
                    "maximum": 9999999999,
                    "example": "12000"
                  },
                  "comment": {
                    "type": "string",
                    "description": "Комментарий к заказу",
                    "example": "Комментарий к заказу",
                    "maxLength": 4294967295
                  },
                  "ext_user_id": {
                    "type": "string",
                    "description": "Идентификатор пользователя внешней витрины (поле обязательно для эквайринга Сбера)",
                    "example": "eb337b43-96bc-450f-9adc-4e5c34a76d69",
                    "max_length": 255
                  },
                  "b2b": {
                    "type": "boolean",
                    "description": "Покупатель b2b",
                    "example": false
                  },
                  "customer_id": {
                    "type": "string",
                    "description": "Идентификатор покупателя",
                    "example": "120033562301",
                    "maxLength": 65
                  },
                  "request_ip": {
                    "type": "string",
                    "description": "IP адрес клиента, обязательный если используется эквайринг от Сбера",
                    "pattern": "ipv4",
                    "example": "123.123.123.123",
                    "minLength": 7,
                    "maxLength": 15
                  },
                  "items": {
                    "type": "array",
                    "description": "Состав заказа",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "SKU продукта",
                          "example": "123456",
                          "maxLength": 255
                        },
                        "price": {
                          "type": "integer",
                          "description": "Цена в копейках",
                          "example": 15000,
                          "minimum": 1,
                          "maximum": 99999999
                        },
                        "price_per_kilo": {
                          "type": "integer",
                          "description": "Цена за кг весового товара в копейках, обязательна, если клиент может передавать свои цены и передан вес",
                          "example": 15000,
                          "minimum": 1,
                          "maximum": 99999999
                        },
                        "discount": {
                          "type": "integer",
                          "description": "Скидка в копейках",
                          "example": 5000,
                          "minimum": 0,
                          "maximum": 99999999
                        },
                        "quantity": {
                          "type": "integer",
                          "description": "Количество единиц товара",
                          "example": 2,
                          "minimum": 0,
                          "maximum": 2147483647
                        },
                        "weight": {
                          "type": "integer",
                          "description": "Вес единицы весового товара в граммах",
                          "example": 800,
                          "minimum": 1,
                          "maximum": 2147483647
                        },
                        "promo_total": {
                          "type": "integer",
                          "description": "Сумма промо-скидки",
                          "example": 200,
                          "minimum": -2147483648,
                          "maximum": 2147483647
                        }
                      },
                      "required": [
                        "id",
                        "quantity"
                      ]
                    }
                  },
                  "contact": {
                    "type": "object",
                    "description": "Контактная информация",
                    "additionalProperties": false,
                    "properties": {
                      "first_name": {
                        "type": "string",
                        "description": "Имя",
                        "example": "Jon",
                        "maxLength": 255
                      },
                      "last_name": {
                        "type": "string",
                        "description": "Фамилия",
                        "example": "Snow",
                        "maxLength": 255
                      },
                      "email": {
                        "type": "string",
                        "description": "Email",
                        "example": "jon.snow@winterfell.nord",
                        "maxLength": 255
                      },
                      "phone": {
                        "type": "string",
                        "description": "Контактный телефон",
                        "example": "79660010203",
                        "pattern": "^7\\d{10}$",
                        "maxLength": 255
                      }
                    },
                    "required": [
                      "phone"
                    ]
                  },
                  "shipping": {
                    "type": "object",
                    "description": "Способ доставки",
                    "properties": {
                      "option_id": {
                        "type": "string",
                        "description": "Опция доставки",
                        "example": "by_courier:b211e6ba-24a5-462c-8cfc-126812ca3011",
                        "maxLength": 255
                      },
                      "address": {
                        "type": "object",
                        "description": "Address",
                        "properties": {
                          "city": {
                            "type": "string",
                            "description": "Город",
                            "example": "Москва",
                            "maxLength": 255
                          },
                          "street": {
                            "type": "string",
                            "description": "Улица",
                            "example": "пр. Ленинский",
                            "maxLength": 255
                          },
                          "building": {
                            "type": "string",
                            "description": "Дом",
                            "example": "100",
                            "maxLength": 255
                          },
                          "block": {
                            "type": "string",
                            "description": "Стрение",
                            "example": "1",
                            "maxLength": 255
                          },
                          "entrance": {
                            "type": "string",
                            "description": "Подъезд",
                            "example": "2",
                            "maxLength": 255
                          },
                          "floor": {
                            "type": "string",
                            "description": "Этаж",
                            "example": "2",
                            "maxLength": 255
                          },
                          "apartment": {
                            "type": "string",
                            "description": "Квартира",
                            "example": "32",
                            "maxLength": 255
                          },
                          "comments": {
                            "type": "string",
                            "description": "Комментарий",
                            "example": "Звонить 2 раза",
                            "maxLength": 255
                          },
                          "lat": {
                            "type": "number",
                            "description": "Широта",
                            "example": 55.761208,
                            "minimum": -90,
                            "maximum": 90
                          },
                          "lon": {
                            "type": "number",
                            "description": "Долгота",
                            "example": 37.640354,
                            "minimum": -180,
                            "maximum": 180
                          },
                          "kind": {
                            "type": "string",
                            "enum": [
                              "office",
                              "home"
                            ],
                            "description": "",
                            "example": "office"
                          },
                          "door_phone": {
                            "type": "string",
                            "description": "Домофон",
                            "example": "32"
                          },
                          "delivery_to_door": {
                            "type": "boolean",
                            "description": "Доставка до двери",
                            "example": false
                          }
                        },
                        "required": [
                          "city",
                          "lat",
                          "lon"
                        ]
                      }
                    },
                    "required": [
                      "option_id",
                      "address"
                    ]
                  },
                  "payment": {
                    "type": "object",
                    "description": "Способ оплаты",
                    "properties": {
                      "option_id": {
                        "type": "string",
                        "description": "Опция оплаты",
                        "example": "BU5LjOXqfVtcnydLnDJFbMrdbDf/+CumT8MsbtY3QXM=",
                        "maxLength": 255
                      }
                    },
                    "required": [
                      "option_id"
                    ]
                  },
                  "replacement": {
                    "type": "object",
                    "description": "Способ согласования замен",
                    "properties": {
                      "option_id": {
                        "type": "string",
                        "example": "call",
                        "maxLength": 255
                      }
                    },
                    "required": [
                      "option_id"
                    ]
                  }
                },
                "required": [
                  "number",
                  "items",
                  "contact",
                  "shipping",
                  "payment",
                  "replacement"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/orders/pickup_from_store": {
      "post": {
        "summary": "Создать заказ c выдачей в магазине",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Информация по заказу",
            "examples": {
              "application/json": {
                "id": "metro1413:4b6f0e3e-054d-492f-a05b-77f0cd110257"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Идентификатор заказа",
                      "example": "metro:ab7520ac-4cff-43be-a683-71a40a658b58",
                      "maxLength": 255
                    }
                  },
                  "required": [
                    "id"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "parameter_missing",
                    "field": "order",
                    "message": "Отсутствует обязательный параметр"
                  }
                ],
                "code": 400
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "items.0.id",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "items.0.quantity",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "items.0.quantity",
                    "message": "не является числом"
                  },
                  {
                    "type": null,
                    "field": "contact.phone",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "contact.phone",
                    "message": "имеет неверное значение"
                  },
                  {
                    "type": null,
                    "field": "shipping.option_id",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "payment.option_id",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "replacement",
                    "message": "не может быть пустым"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "number": {
                    "type": "string",
                    "description": "Номер заказа",
                    "example": "ab7520ac",
                    "maxLength": 255
                  },
                  "ship_total": {
                    "type": "integer",
                    "description": "Цена доставки в копейках",
                    "example": "12000",
                    "minimum": -9999999999,
                    "maximum": 9999999999
                  },
                  "comment": {
                    "type": "string",
                    "description": "Комментарий к заказу",
                    "example": "Комментарий к заказу",
                    "maxLength": 4294967295
                  },
                  "ext_user_id": {
                    "type": "string",
                    "description": "Идентификатор пользователя внешней витрины (поле обязательно для эквайринга Сбера)",
                    "example": "eb337b43-96bc-450f-9adc-4e5c34a76d69",
                    "max_length": 255
                  },
                  "b2b": {
                    "type": "boolean",
                    "description": "Покупатель b2b",
                    "example": false
                  },
                  "customer_id": {
                    "type": "string",
                    "description": "Идентификатор покупателя",
                    "example": "120033562301",
                    "maxLength": 65
                  },
                  "request_ip": {
                    "type": "string",
                    "description": "IP адрес клиента, обязательный если используется эквайринг от Сбера",
                    "pattern": "ipv4",
                    "example": "123.123.123.123",
                    "minLength": 7,
                    "maxLength": 15
                  },
                  "items": {
                    "type": "array",
                    "description": "Состав заказа",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "SKU продукта",
                          "example": "123456",
                          "maxLength": 255
                        },
                        "price": {
                          "type": "integer",
                          "description": "Цена в копейках",
                          "example": 15000,
                          "minimum": 1,
                          "maximum": 99999999
                        },
                        "discount": {
                          "type": "integer",
                          "description": "Скидка в копейках",
                          "example": 5000,
                          "minimum": 0,
                          "maximum": 99999999
                        },
                        "quantity": {
                          "type": "integer",
                          "description": "Количество единиц товара",
                          "example": 2,
                          "minimum": 0,
                          "maximum": 2147483647
                        },
                        "weight": {
                          "type": "integer",
                          "description": "Вес единицы весового товара в граммах",
                          "example": 800,
                          "minimum": 1,
                          "maximum": 2147483647
                        },
                        "promo_total": {
                          "type": "integer",
                          "description": "Сумма промо-скидки",
                          "example": 200,
                          "minimum": -2147483648,
                          "maximum": 2147483647
                        }
                      },
                      "required": [
                        "id",
                        "quantity"
                      ]
                    }
                  },
                  "contact": {
                    "type": "object",
                    "description": "Контактная информация",
                    "additionalProperties": false,
                    "required": [
                      "phone"
                    ],
                    "properties": {
                      "first_name": {
                        "type": "string",
                        "description": "Имя",
                        "example": "Jon",
                        "maxLength": 255
                      },
                      "last_name": {
                        "type": "string",
                        "description": "Фамилия",
                        "example": "Snow",
                        "maxLength": 255
                      },
                      "email": {
                        "type": "string",
                        "description": "Email",
                        "example": "jon.snow@winterfell.nord",
                        "maxLength": 255
                      },
                      "phone": {
                        "type": "string",
                        "description": "Контактный телефон",
                        "example": "79660010203",
                        "pattern": "^7\\d{10}$",
                        "maxLength": 255
                      }
                    }
                  },
                  "shipping": {
                    "type": "object",
                    "description": "Способ доставки",
                    "properties": {
                      "option_id": {
                        "type": "string",
                        "description": "Опция доставки",
                        "example": "pickup:b211e6ba-24a5-462c-8cfc-126812ca3011",
                        "maxLength": 255
                      }
                    },
                    "required": [
                      "option_id"
                    ]
                  },
                  "payment": {
                    "type": "object",
                    "description": "Способ оплаты",
                    "properties": {
                      "option_id": {
                        "type": "string",
                        "description": "Опция оплаты",
                        "example": "BU5LjOXqfVtcnydLnDJFbMrdbDf/+CumT8MsbtY3QXM=",
                        "maxLength": 255
                      }
                    },
                    "required": [
                      "option_id"
                    ]
                  },
                  "replacement": {
                    "type": "object",
                    "description": "Способ согласования замен",
                    "properties": {
                      "option_id": {
                        "type": "string",
                        "example": "call",
                        "maxLength": 255
                      }
                    },
                    "required": [
                      "option_id"
                    ]
                  }
                },
                "required": [
                  "number",
                  "items",
                  "contact",
                  "shipping",
                  "payment",
                  "replacement"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/orders/{id}": {
      "get": {
        "summary": "Показать заказ по uuid",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "id",
            "in": "path",
            "description": "Идентификатор заказа, макс. длина 255",
            "example": "metro:ab7520ac-4cff-43be-a683-71a40a658b58",
            "required": true,
            "schema": {
              "type": "string",
              "maxLength": 255
            }
          },
          {
            "name": "include",
            "in": "query",
            "description": "Какие поля включать в ответ, макс. длина 255",
            "example": "contact,shipping,shipping_crew,packages,payments",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Информация по заказу",
            "examples": {
              "application/json": {
                "id": "metro:f370679e-bf7e-4b5f-94d2-fc8ded70d492",
                "number": "metro:T20178",
                "retailer_id": "metro",
                "external_promocode": null,
                "external_customer_id": null,
                "b2b": false,
                "opaque_packages": [],
                "total": 100000,
                "features": [],
                "item_total": 100000,
                "ship_total": 0,
                "item_count": 1,
                "promo_total": 0,
                "shipment_state": "ready",
                "payment_state": "not_paid",
                "created_at": "2022-03-25T13:42:21.000+03:00",
                "updated_at": "2022-03-25T13:42:22.000+03:00",
                "state": "complete",
                "comment": null,
                "contact": {
                  "first_name": "Ivan",
                  "last_name": "Fedorov",
                  "phone": "74951112233"
                },
                "shipping_crew": [],
                "packages": [
                  {
                    "id": "443e918d-7b93-466f-930f-f3a0e9461103",
                    "number": "H03304470352",
                    "item_count": 1,
                    "features": [],
                    "total": 100000,
                    "item_total": 100000,
                    "ship_total": 0,
                    "promo_total": 0,
                    "weight": 500,
                    "state": "ready",
                    "modifications": [],
                    "line_items": [
                      {
                        "product_id": "0000000503",
                        "name": "Product #350",
                        "quantity": 1,
                        "total_weight": 500,
                        "features": [],
                        "price": 50000,
                        "price_per_kilo": 100000,
                        "original_price": 50000,
                        "original_price_per_kilo": 100000,
                        "total": 100000,
                        "promo_total": 0,
                        "state": null,
                        "size_label": {
                          "volume": "100.0",
                          "volume_type": "weight",
                          "unit_size": "500",
                          "package_type": "weight"
                        },
                        "discount_ends_at": null,
                        "modifications": [
                          {
                            "price": 0,
                            "quantity": 0
                          }
                        ],
                        "vat_rate": 20
                      }
                    ]
                  },
                  {
                    "id": "c9d94b10-712c-4857-88c7-0928f9ebd0cb",
                    "number": "H67476206434",
                    "item_count": 0,
                    "features": [],
                    "total": 0,
                    "item_total": 0,
                    "ship_total": 0,
                    "promo_total": 0,
                    "weight": 0,
                    "state": "pending",
                    "modifications": [],
                    "line_items": []
                  }
                ],
                "payments": [
                  {
                    "type": "cash",
                    "package_ids": [
                      154
                    ],
                    "state": "checkout",
                    "option_id": "cash:N8YDG62K"
                  }
                ],
                "shipping": {
                  "type": "by_courier",
                  "option_id": "by_courier:092a43a5-015e-4252-a4a2-72ffa5b97f0c",
                  "store_id": "metro:42bbae25-61e0-4d71-ad4c-219a7c5e4e9b",
                  "price": 0,
                  "original_price": 0,
                  "shipped_at": null,
                  "state": "ready",
                  "address": {
                    "city": "Москва",
                    "street": "148th street",
                    "building": "56 c.3",
                    "block": "1",
                    "entrance": "1",
                    "floor": "1",
                    "apartment": "1",
                    "comments": null,
                    "lat": 5,
                    "lon": 5,
                    "kind": null,
                    "door_phone": "1",
                    "delivery_to_door": true
                  },
                  "delivery_window": {
                    "starts_at": "2022-03-25T13:42:22.000+03:00",
                    "ends_at": "2022-03-25T16:42:22.000+03:00"
                  },
                  "rates": [
                    {
                      "type": "shipping_rate",
                      "title": "Доставка",
                      "detail": "",
                      "price": 49000,
                      "original_price": 49000
                    }
                  ]
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Идентификатор заказа",
                      "example": "metro:ab7520ac-4cff-43be-a683-71a40a658b58",
                      "maxLength": 255
                    },
                    "number": {
                      "type": "string",
                      "description": "номер заказа",
                      "example": "metro:T20001",
                      "maxLength": 255
                    },
                    "retailer_id": {
                      "type": "string",
                      "description": "ID ретейлера",
                      "example": "metro",
                      "maxLength": 255
                    },
                    "opaque_packages": {
                      "type": "array",
                      "description": "Тип товаров, прямая доставка которых запрещена",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Тип ограничений",
                            "example": "alcohol",
                            "maxLength": 255
                          },
                          "title": {
                            "type": "string",
                            "description": "Название ограничения",
                            "example": "Алкоголь",
                            "maxLength": 255
                          }
                        },
                        "required": [
                          "type",
                          "title"
                        ]
                      }
                    },
                    "total": {
                      "type": "integer",
                      "description": "Полная стоимость заказа",
                      "example": 7002,
                      "maximum": 2147483647,
                      "minimum": 0
                    },
                    "features": {
                      "type": "array",
                      "description": "Признаки заказа",
                      "items": {
                        "type": "string",
                        "example": "alcohol",
                        "maxLength": 255
                      }
                    },
                    "item_total": {
                      "type": "integer",
                      "description": "Стоимость товаров в заказе",
                      "example": 1990,
                      "maximum": 2147483647,
                      "minimum": 0
                    },
                    "ship_total": {
                      "type": "integer",
                      "description": "Стоимость доставки",
                      "example": 1990,
                      "maximum": 2147483647,
                      "minimum": 0
                    },
                    "item_count": {
                      "type": "integer",
                      "description": "Количество товаров в заказе",
                      "example": 6,
                      "maximum": 2147483647,
                      "minimum": 0
                    },
                    "promo_total": {
                      "type": "integer",
                      "description": "Сумма промо-скидки",
                      "example": 1000,
                      "maximum": 2147483647,
                      "minimum": 0
                    },
                    "shipment_state": {
                      "type": "string",
                      "nullable": true,
                      "description": "Статус доставки",
                      "example": "ready",
                      "maxLength": 255
                    },
                    "payment_state": {
                      "type": "string",
                      "nullable": true,
                      "description": "Статус оплаты",
                      "example": "not_paid",
                      "maxLength": 255
                    },
                    "created_at": {
                      "type": "string",
                      "description": "Время и дата создания заказа",
                      "example": "2020-08-17T09:54:31.000+03:00",
                      "maxLength": 255
                    },
                    "updated_at": {
                      "type": "string",
                      "description": "Время и дата обновления заказа",
                      "example": "2020-08-17T09:54:31.000+03:00",
                      "maxLength": 255
                    },
                    "state": {
                      "type": "string",
                      "description": "Состояние заказа",
                      "example": "complete",
                      "maxLength": 255
                    },
                    "comment": {
                      "type": "string",
                      "nullable": true,
                      "description": "Комментарий к заказу",
                      "example": "Комментарий к заказу",
                      "maxLength": 4294967295
                    },
                    "shipping_crew": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string",
                            "description": "ФИО сотрудника",
                            "example": "Иванов Иван Иванович",
                            "maxLength": 255
                          },
                          "phone": {
                            "type": "string",
                            "description": "Номер телефона сотрудника",
                            "example": "+79111111111",
                            "nullable": true,
                            "maxLength": 255
                          },
                          "role": {
                            "type": "string",
                            "nullable": true,
                            "description": "Роль сотрудника",
                            "example": "shopper|driver",
                            "maxLength": 255
                          }
                        },
                        "required": [
                          "name",
                          "phone",
                          "role"
                        ]
                      }
                    },
                    "packages": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": [
                          "id",
                          "number",
                          "item_count",
                          "features",
                          "total",
                          "item_total",
                          "ship_total",
                          "promo_total",
                          "weight",
                          "line_items"
                        ],
                        "properties": {
                          "id": {
                            "type": "string",
                            "description": "Идентификатор доставки",
                            "maxLength": 255,
                            "example": "ab7520ac-4cff-43be-a683-71a40a658b58"
                          },
                          "number": {
                            "type": "string",
                            "maxLength": 255,
                            "description": "Номер доставки",
                            "example": "H34010457467"
                          },
                          "item_count": {
                            "type": "integer",
                            "description": "Количество товаров в доставке",
                            "minimum": 0,
                            "maximum": 2147483647,
                            "example": 12
                          },
                          "features": {
                            "type": "array",
                            "description": "Ограничения в продуктах",
                            "items": {
                              "type": "string",
                              "example": "alcohol",
                              "maxLength": 255
                            }
                          },
                          "total": {
                            "type": "integer",
                            "description": "Полная цена доставки",
                            "maximum": 2147483647,
                            "minimum": 0,
                            "example": 12
                          },
                          "item_total": {
                            "type": "integer",
                            "description": "Цена товаров",
                            "maximum": 2147483647,
                            "minimum": 0,
                            "example": 12
                          },
                          "ship_total": {
                            "type": "integer",
                            "description": "Стоимость доставки",
                            "maximum": 2147483647,
                            "minimum": 0,
                            "example": 12
                          },
                          "promo_total": {
                            "type": "integer",
                            "description": "Размер скидки",
                            "maximum": 2147483647,
                            "minimum": 0,
                            "example": 12
                          },
                          "weight": {
                            "type": "number",
                            "description": "Вес доставки",
                            "maximum": 99999999.99,
                            "minimum": 0,
                            "example": 12
                          },
                          "state": {
                            "type": "string",
                            "maxLength": 255,
                            "description": "Статус доставки",
                            "example": "collected"
                          },
                          "line_items": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "product_id": {
                                  "type": "string",
                                  "description": "Артикул продукта",
                                  "maxLength": 255,
                                  "example": "00000001"
                                },
                                "name": {
                                  "type": "string",
                                  "description": "Название продукта",
                                  "maxLength": 255,
                                  "example": "Киви"
                                },
                                "quantity": {
                                  "type": "number",
                                  "format": "float",
                                  "description": "Количество продуктов",
                                  "maximum": 2147483647,
                                  "minimum": 0,
                                  "example": 1.42
                                },
                                "total_weight": {
                                  "type": "number",
                                  "description": "Общий вес весового товара в граммах",
                                  "maximum": 99999999,
                                  "minimum": 1,
                                  "example": 750
                                },
                                "features": {
                                  "type": "array",
                                  "description": "Ограничения в продуктах",
                                  "items": {
                                    "type": "string",
                                    "example": "alcohol",
                                    "maxLength": 255
                                  }
                                },
                                "price": {
                                  "type": "integer",
                                  "description": "Цена продукта со скидкой",
                                  "maximum": 2147483647,
                                  "minimum": 0,
                                  "example": 12
                                },
                                "original_price": {
                                  "type": "integer",
                                  "description": "Полная цена продукта",
                                  "maximum": 2147483647,
                                  "minimum": 0,
                                  "example": 12
                                },
                                "original_price_per_kilo": {
                                  "type": "integer",
                                  "description": "Полная цена продукта за КГ",
                                  "maximum": 2147483647,
                                  "minimum": 0,
                                  "example": 10
                                },
                                "promo_total": {
                                  "type": "integer",
                                  "description": "Размер скидки",
                                  "maximum": 2147483647,
                                  "minimum": 0,
                                  "example": 12
                                },
                                "state": {
                                  "type": "string",
                                  "nullable": true,
                                  "description": "Статус товара",
                                  "maxLength": 255,
                                  "example": "assembled"
                                },
                                "size_label": {
                                  "type": "object",
                                  "properties": {
                                    "volume": {
                                      "type": "string",
                                      "description": "Объем упаковки",
                                      "maxLength": 255,
                                      "example": "200.00"
                                    },
                                    "volume_type": {
                                      "type": "string",
                                      "description": "Единица измерения упаковки",
                                      "example": "weight",
                                      "maxLength": 255
                                    },
                                    "unit_size": {
                                      "type": "string",
                                      "description": "Размер упаковки",
                                      "maxLength": 255,
                                      "example": "200.00"
                                    },
                                    "package_type": {
                                      "type": "string",
                                      "description": "Тип упаковки",
                                      "example": "piece",
                                      "maxLength": 255
                                    }
                                  },
                                  "required": [
                                    "volume",
                                    "volume_type"
                                  ]
                                },
                                "discount_ends_at": {
                                  "type": "string",
                                  "nullable": true,
                                  "description": "Дата окончания скидки",
                                  "maxLength": 255,
                                  "example": "2021-02-09T11:05:04.000+03:00"
                                },
                                "modifications": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "price": {
                                        "type": "integer",
                                        "description": "Цена измененного продукта",
                                        "maximum": 2147483647,
                                        "minimum": 0,
                                        "example": 12
                                      },
                                      "quantity": {
                                        "type": "number",
                                        "format": "float",
                                        "description": "Измененное количество продукта",
                                        "maximum": 2147483647,
                                        "minimum": 0,
                                        "example": 12
                                      }
                                    },
                                    "required": [
                                      "price",
                                      "quantity"
                                    ]
                                  }
                                },
                                "vat_rate": {
                                  "type": "integer",
                                  "description": "Налоговая ставка",
                                  "nullable": true,
                                  "maxium": 100,
                                  "minimum": 0,
                                  "example": 20
                                }
                              },
                              "required": [
                                "product_id",
                                "name",
                                "quantity",
                                "features",
                                "price",
                                "original_price",
                                "promo_total",
                                "state",
                                "size_label",
                                "modifications",
                                "vat_rate"
                              ]
                            }
                          },
                          "modifications": {
                            "type": "array",
                            "description": "Замены и отмены",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "object",
                                  "required": [
                                    "type",
                                    "from_product_id",
                                    "to_product_id"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "enum": [
                                        "replace"
                                      ]
                                    },
                                    "from_product_id": {
                                      "type": "integer"
                                    },
                                    "to_product_id": {
                                      "type": "integer"
                                    }
                                  }
                                },
                                {
                                  "type": "object",
                                  "required": [
                                    "type",
                                    "product_id"
                                  ],
                                  "properties": {
                                    "type": {
                                      "type": "string",
                                      "enum": [
                                        "cancel"
                                      ]
                                    },
                                    "product_id": {
                                      "type": "integer"
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    },
                    "contact": {
                      "type": "object",
                      "nullable": true,
                      "additionalProperties": false,
                      "description": "Контактная информация",
                      "required": [
                        "phone",
                        "first_name",
                        "last_name"
                      ],
                      "properties": {
                        "first_name": {
                          "type": "string",
                          "description": "Имя покупателя",
                          "example": "Иван",
                          "nullable": true,
                          "maxLength": 255
                        },
                        "last_name": {
                          "type": "string",
                          "description": "Фамилия покупателя",
                          "example": "Иванов",
                          "nullable": true,
                          "maxLength": 255
                        },
                        "phone": {
                          "type": "string",
                          "description": "Номер телефона покупателя",
                          "example": "79111111111",
                          "maxLength": 255
                        }
                      }
                    },
                    "shipping": {
                      "type": "object",
                      "nullable": true,
                      "properties": {
                        "type": {
                          "type": "string",
                          "description": "Тип доставки",
                          "example": "by_courier",
                          "maxLength": 255
                        },
                        "option_id": {
                          "type": "string",
                          "description": "Тип доставки:uuid окна доставки",
                          "example": "by_courier:897697f3-10e7-40b6-bc52-f315ec8cb4dc",
                          "maxLength": 255
                        },
                        "store_id": {
                          "type": "string",
                          "description": "Ретейлер:uuid магазина",
                          "example": "METRO:c113-321122-111",
                          "maxLength": 255
                        },
                        "price": {
                          "type": "integer",
                          "description": "Цена со скидкой",
                          "example": 1000,
                          "maximum": 2147483647,
                          "minimum": 0
                        },
                        "original_price": {
                          "type": "integer",
                          "description": "Цена без скидки",
                          "example": 1500,
                          "maximum": 2147483647,
                          "minimum": 0
                        },
                        "shipped_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "Дата и время, когда заказ был доставлен",
                          "example": "2020-08-17T09:54:31.000+03:00",
                          "maxLength": 255
                        },
                        "state": {
                          "type": "string",
                          "description": "Статус доставки",
                          "example": "ready",
                          "maxLength": 255
                        },
                        "address": {
                          "type": "object",
                          "properties": {
                            "city": {
                              "type": "string",
                              "description": "Город",
                              "example": "Москва",
                              "maxLength": 255
                            },
                            "street": {
                              "type": "string",
                              "description": "Улица",
                              "example": "Арбат",
                              "maxLength": 255
                            },
                            "building": {
                              "type": "string",
                              "description": "Строение",
                              "example": "2А",
                              "maxLength": 255
                            },
                            "block": {
                              "type": "string",
                              "description": "Номер дома?",
                              "example": "2",
                              "maxLength": 255
                            },
                            "entrance": {
                              "type": "string",
                              "description": "Номер подъезда",
                              "example": "2",
                              "maxLength": 255
                            },
                            "floor": {
                              "type": "string",
                              "description": "Этаж",
                              "example": "2",
                              "maxLength": 255
                            },
                            "apartment": {
                              "type": "string",
                              "nullable": true,
                              "description": "Номер квартиры",
                              "example": "1",
                              "maxLength": 255
                            },
                            "comments": {
                              "type": "string",
                              "nullable": true,
                              "description": "Комментарий к доставке",
                              "example": "Позвонить перед отправкой",
                              "maxLength": 255
                            },
                            "lat": {
                              "type": "number",
                              "description": "Широта",
                              "minimum": -90,
                              "maximum": 90,
                              "example": 55.766116
                            },
                            "lon": {
                              "type": "number",
                              "description": "Долгота",
                              "minimum": -180,
                              "maximum": 180,
                              "example": 55.766116
                            },
                            "kind": {
                              "type": "string",
                              "nullable": true,
                              "description": "Офис|Квартира",
                              "example": "home",
                              "maxLength": 255
                            },
                            "door_phone": {
                              "type": "string",
                              "nullable": true,
                              "description": "Номер домофона",
                              "example": "12",
                              "maxLength": 255
                            },
                            "delivery_to_door": {
                              "type": "boolean",
                              "example": true
                            }
                          },
                          "required": [
                            "city",
                            "street",
                            "building",
                            "block",
                            "entrance",
                            "floor",
                            "apartment",
                            "comments",
                            "lat",
                            "lon",
                            "kind",
                            "door_phone",
                            "delivery_to_door"
                          ]
                        },
                        "delivery_window": {
                          "type": "object",
                          "properties": {
                            "starts_at": {
                              "type": "string",
                              "description": "Начало окна доставки",
                              "maxLength": 255,
                              "example": "2021-02-09T09:00:00.000+03:00"
                            },
                            "ends_at": {
                              "type": "string",
                              "description": "Конец окна доставки",
                              "maxLength": 255,
                              "example": "2021-02-09T09:00:00.000+03:00"
                            }
                          },
                          "required": [
                            "starts_at",
                            "ends_at"
                          ]
                        },
                        "rates": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "string",
                                "description": "Тип услуги",
                                "example": "shipping_rate",
                                "maxLength": 255
                              },
                              "title": {
                                "type": "string",
                                "description": "Локализованный тип услуги",
                                "example": "Доставка",
                                "maxLength": 255
                              },
                              "detail": {
                                "type": "string",
                                "description": "Уточнения у услуге",
                                "maxLength": 255,
                                "example": ""
                              },
                              "price": {
                                "type": "integer",
                                "description": "Стоимость услуги со скидкой",
                                "maximum": 2147483647,
                                "minimum": 0,
                                "example": 12
                              },
                              "original_price": {
                                "type": "integer",
                                "description": "Стоимость услуги без скидок",
                                "maximum": 2147483647,
                                "minimum": 0,
                                "example": 12
                              }
                            },
                            "required": [
                              "type",
                              "title",
                              "detail",
                              "price",
                              "original_price"
                            ]
                          }
                        }
                      },
                      "required": [
                        "type",
                        "option_id",
                        "store_id",
                        "price",
                        "original_price",
                        "shipped_at",
                        "state",
                        "address",
                        "delivery_window",
                        "rates"
                      ]
                    },
                    "payments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "description": "Тип оплаты",
                            "example": "cash",
                            "maxLength": 255
                          },
                          "package_ids": {
                            "type": "array",
                            "description": "Идентификаторы доставок для этого платежа",
                            "items": {
                              "type": "integer",
                              "example": 1,
                              "minimum": 1,
                              "maximum": 2147483647
                            }
                          },
                          "state": {
                            "type": "string",
                            "description": "Статус платежа",
                            "example": "checkout",
                            "maxLength": 255
                          },
                          "option_id": {
                            "type": "string",
                            "description": "Тип оплаты:UUID платежа",
                            "example": "cash:CJJ6DAS",
                            "maxLength": 255
                          }
                        },
                        "required": [
                          "type",
                          "package_ids",
                          "state",
                          "option_id"
                        ]
                      }
                    }
                  },
                  "required": [
                    "id",
                    "number",
                    "retailer_id",
                    "opaque_packages",
                    "total",
                    "features",
                    "item_total",
                    "ship_total",
                    "item_count",
                    "promo_total",
                    "shipment_state",
                    "payment_state",
                    "created_at",
                    "updated_at",
                    "state",
                    "comment",
                    "shipping_crew",
                    "contact",
                    "packages",
                    "payments",
                    "shipping"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "404": {
            "description": "Заказ не найден",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Заказ не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/payments/cloud_payments/credit_card_authorizations": {
      "post": {
        "summary": "Инициация процесса авторизации карты",
        "tags": [
          "Credit Cards (Cloud Payments)"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Карта преавторизована",
            "examples": {
              "application/json": {
                "credit_card_authorization": {
                  "transaction_number": "16816774",
                  "finalization_url": "https://instamart.ru/cloud_payments?payment_option_id=sw%2FRpcuP0T8FMLOVQutK8SeI2AnwrOued37yJcXTjZE%3D&return_url=https%3A%2F%2Finstamart.ru%2Fapi%2Fv3%2Fpayments%2Fcloud_payments%2Fcredit_card_authorizations%2Ffinish%3Fpayment_option_id%3Dsw%252FRpcuP0T8FMLOVQutK8SeI2AnwrOued37yJcXTjZE%253D",
                  "payment_option_id": "sw/RpcuP0T8FMLOVQutK8SeI2AnwrOued37yJcXTjZE="
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "credit_card_authorization": {
                      "type": "object",
                      "description": "данные для авторизации кредитной карты",
                      "properties": {
                        "transaction_number": {
                          "type": "string",
                          "description": "номер транзакции",
                          "example": "16816774",
                          "maxLength": 255
                        },
                        "finalization_url": {
                          "type": "string",
                          "description": "URI для завершения авторизации",
                          "example": "https://sbermarket.ru/cloud_payments?payment_option_id=wPymljUatO9gbpp%2BJWYqn2OH5bw7lbul5JCtfRL52ZA%3D&return_url=https%3A%2F%2Fsbermarket.ru%2Fapi%2Fv3%2Fpayments%2Fcloud_payments%2Fcredit_card_authorizations%2Ffinish%3Fpayment_option_id%3DwPymljUatO9gbpp%252BJWYqn2OH5bw7lbul5JCtfRL52ZA%253D",
                          "maxLength": 2048,
                          "nullable": true
                        },
                        "payment_option_id": {
                          "type": "string",
                          "description": "идентификатор опции оплаты",
                          "example": "wPymljUatO9gbpp+JWYqn2OH5bw7lbul5JCtfRL52ZA=",
                          "maxLength": 255
                        }
                      },
                      "required": [
                        "transaction_number",
                        "finalization_url",
                        "payment_option_id"
                      ]
                    }
                  },
                  "required": [
                    "credit_card_authorization"
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Ошибка авторизации карты",
            "examples": {
              "application/json": {
                "errors": "Transaction 16844517 Недостаточно средств на карте",
                "code": "unprocessable_entity"
              }
            },
            "content": {}
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "request_ip": {
                    "type": "string",
                    "description": "ip адрес для передачи в Cloud payment",
                    "example": "127.0.0.1"
                  },
                  "account_id": {
                    "type": "string",
                    "description": "сгенерированная последовательность для передачи в Cloud payment",
                    "example": "3245235435_53254352353"
                  },
                  "credit_card_authorization": {
                    "type": "object",
                    "description": "данные для авторизации кредитной карты",
                    "properties": {
                      "credit_card": {
                        "type": "object",
                        "description": "данные карты",
                        "properties": {
                          "title": {
                            "type": "string",
                            "description": "название карты",
                            "example": "зарплатная",
                            "maxLength": 255
                          },
                          "name": {
                            "type": "string",
                            "description": "имя владельца карты (латиницей)",
                            "example": "IVAN IVANOV",
                            "maxLength": 255
                          },
                          "month": {
                            "type": "string",
                            "description": "срок действия карты (месяц)",
                            "example": "12",
                            "maxLength": 2
                          },
                          "year": {
                            "type": "string",
                            "description": "срок действия карты (год)",
                            "example": "2025",
                            "maxLength": 4
                          },
                          "last_digits": {
                            "type": "string",
                            "description": "последние 4 цифры номера карты",
                            "example": "1234",
                            "maxLength": 4
                          },
                          "cryptogram_packet": {
                            "type": "string",
                            "description": "криптограмма карты",
                            "example": "014111111111211202LQe6n5T6UJ0FZB3UljfX+UgM9UMWWnVy91YBzqg8J5gz0CG9XASHnpz+qdxh52BOtzr6EiVwrZtY05r4WP0Y1eaqWZ6xKfbtTPjd51olnRsp83Jv5cAQadi8rYD0SVc/lPooQIxRpqM7mouz8Gha3wdB8WMwc1jAHvDoH/F2AlJuF7RseQMdaz4QyBsrEWP+Kkiq32OVfkbnAPx9kA+KqyugAo3jnkKHLFJeaPcJX815oNTWmgkkp6OATD2Q9aJIDnpWAQy4SahiIxMPPfACuwcNY4IXVoceSGp5RSreSh7ztEzrGBr6fZ0KTtWpBBm7t9i/8qsdPYoY2Iy2PWg6vA=="
                          }
                        },
                        "required": [
                          "name",
                          "month",
                          "year",
                          "last_digits",
                          "cryptogram_packet"
                        ]
                      },
                      "redirect_uri": {
                        "type": "string",
                        "description": "адрес для возврата после авторизации карты",
                        "example": "https://example.com/orders",
                        "maxLength": 2048
                      }
                    },
                    "required": [
                      "credit_card"
                    ]
                  }
                },
                "required": [
                  "credit_card_authorization"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/payments/cloud_payments/credit_card_authorizations/finish": {
      "post": {
        "summary": "Заверщение процесса авторизации карты",
        "tags": [
          "Credit Cards (Cloud Payments)"
        ],
        "parameters": [
          {
            "name": "payment_option_id",
            "in": "query",
            "description": "идентификатор опции оплаты",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "MD",
            "in": "query",
            "description": "ключ для 3ds авторизации",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "PaRes",
            "in": "query",
            "description": "ключ для 3ds авторизации",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "redirect_uri",
            "in": "query",
            "description": "адрес для возврата после авторизации карты",
            "example": "https://example.com/orders",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Перенаправление после авторизации карты",
            "examples": {
              "application/json": null
            },
            "content": {}
          }
        }
      }
    },
    "/api/v3/payments/cloud_payments": {
      "get": {
        "summary": "Получение данных карты",
        "tags": [
          "Credit Cards (Cloud Payments)"
        ],
        "description": "Получить данные карты по payment_option_id или order_uuid с payment_identifier",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "payment_option_id",
            "description": "Encrypted payment option id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "return_url",
            "description": "Term URL",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "order_uuid",
            "description": "Order uuid",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "payment_identifier",
            "description": "Payment identifier",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Данные карты",
            "examples": {
              "application/json": {
                "credit_card": {
                  "md": "1234-5678-9012",
                  "acs_url": "https://acs.url",
                  "pa_req": "123456789",
                  "term_url": "https://term.url"
                },
                "term_url": "https://custom.url"
              }
            },
            "content": {}
          },
          "400": {
            "description": "Отсутствует обязательный параметр",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "parameter_missing",
                    "field": "return_url",
                    "message": "Отсутствует обязательный параметр"
                  }
                ],
                "code": 400
              }
            },
            "content": {}
          },
          "404": {
            "description": "Не найдено",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Платежное средство не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {}
          }
        }
      }
    },
    "/api/v3/payments/sber_payments/credit_card_authorizations": {
      "post": {
        "summary": "Инициация процесса авторизации карты",
        "tags": [
          "Credit Cards (Sber Payments)"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Форма авторизации сгенерирована",
            "examples": {
              "application/json": {
                "transaction_number": "372952ec-45fa-4edb-bb95-d617b1ee9b2a",
                "form_url": "https://pay.example/payment/merchants/sbersafe_sberid/payment_ru.html?mdOrder=372952ec-45fa-4edb-bb95-d617b1ee9b2a"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "transaction_number",
                    "form_url"
                  ],
                  "properties": {
                    "transaction_number": {
                      "type": "string",
                      "description": "Номер транзакции",
                      "example": "372952ec-45fa-4edb-bb95-d617b1ee9b2a",
                      "minLength": 36,
                      "maxLength": 36
                    },
                    "form_url": {
                      "type": "string",
                      "description": "URL-адрес с готовой формой авторизационного платежа, сюда нужно редирректить пользователя",
                      "example": "https://pay.example/payment/merchants/sbersafe_sberid/payment_ru.html?mdOrder=372952ec-45fa-4edb-bb95-d617b1ee9b2a",
                      "maxLength": 512
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Ошибка создания формы авторизации",
            "examples": {
              "application/json": {
                "errors": "Ошибка добавления карты",
                "code": "unprocessable_entity"
              }
            },
            "content": {}
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "success_url",
                  "fail_url",
                  "ext_user_id"
                ],
                "properties": {
                  "success_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "URL-адрес для возврата из формы авторизационного платежа в случае успеха",
                    "example": "https://site.example/profile/cards/success",
                    "maxLength": 512
                  },
                  "fail_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "URL-адрес для возврата из формы авторизационного платежа в случае ошибки",
                    "example": "https://site.example/profile/cards/fail",
                    "maxLength": 512
                  },
                  "ext_user_id": {
                    "type": "string",
                    "description": "Некий ID пользователя - владельца карты, может быть числом, UUID-ом, номером телефона, email-ом, и т.д.",
                    "example": "eb337b43-96bc-450f-9adc-4e5c34a76d69"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/payments/sber_payments/credit_card_authorizations/finish": {
      "post": {
        "summary": "Заверщение процесса авторизации карты",
        "tags": [
          "Credit Cards (Sber Payments)"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Авторизация не пройдена (при уведомлении со страницы fail_url)",
            "examples": {
              "application/json": {
                "display_number": "•••• 1111",
                "payment_option_id": "d8maIREDyLeqz1M2aAqsBLJ45nD36vQJQHfDGtloPTk=",
                "errors": "Ограничение по карте. Пожалуйста, обратитесь в банк, выпустивший карту.",
                "code": "ok"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "display_number",
                    "payment_option_id"
                  ],
                  "properties": {
                    "display_number": {
                      "type": "string",
                      "description": "Маскированный номер карты",
                      "example": "•••• 7890"
                    },
                    "payment_option_id": {
                      "type": "string",
                      "description": "Идентификатор опции оплаты",
                      "example": "wPymljUatO9gbpp+JWYqn2OH5bw7lbul5JCtfRL52ZA=",
                      "maxLength": 255
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Авторизация не пройдена (некорректный номер транзакции, недоступен ПШ, и прочее)",
            "examples": {
              "application/json": {
                "errors": "Ошибка добавления карты",
                "code": "unprocessable_entity"
              }
            },
            "content": {}
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "transaction_number",
                  "ext_user_id"
                ],
                "properties": {
                  "transaction_number": {
                    "type": "string",
                    "description": "Номер транзакции из первого шага",
                    "example": "372952ec-45fa-4edb-bb95-d617b1ee9b2a",
                    "minLength": 36,
                    "maxLength": 36
                  },
                  "ext_user_id": {
                    "type": "string",
                    "description": "ID пользователя из первого шага",
                    "example": "eb337b43-96bc-450f-9adc-4e5c34a76d69"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/payments/sber_payments/credit_cards": {
      "get": {
        "summary": "Получение данных карты",
        "tags": [
          "Credit Cards (Sber Payments)"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "order_uuid",
            "description": "UUID заказа",
            "in": "query",
            "example": "0be37cb4-df40-4e58-a5ed-531401457ce7",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "payment_identifier",
            "description": "payment_identifier",
            "in": "query",
            "example": "58WWPE4Z",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Данные карты",
            "examples": {
              "application/json": {
                "credit_card": {
                  "md": "1234-5678-9012",
                  "acs_url": "https://acs.url",
                  "pa_req": "123456789",
                  "term_url": "https://term.url"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "credit_card": {
                      "type": "object",
                      "description": "данные для авторизации кредитной карты",
                      "properties": {
                        "md": {
                          "type": "string",
                          "description": "ID транзакции (ключ для аутентификации 3ds)",
                          "example": "12184236",
                          "maxLength": 255,
                          "nullable": true
                        },
                        "acs_url": {
                          "type": "string",
                          "description": "Адрес сервера аутентификации 3ds",
                          "example": "https://acs.sbrf.ru",
                          "maxLength": 480,
                          "nullable": true
                        },
                        "pa_req": {
                          "type": "string",
                          "description": "Зашифрованные данные о платеже (ключ для аутентификации 3ds)",
                          "example": "eJxVUttygjAQ/RWGdwzBBNRZ41jpdUZ0tHbqYyShYCvQAB3L1zdRaWue9uzl7O7ZwOR4",
                          "maxLength": 65535,
                          "nullable": true
                        },
                        "term_url": {
                          "type": "string",
                          "description": "Адрес перенаправления после успешной аутентификации 3ds",
                          "example": "https://3dsec.sberbank.ru/payment/rest/finish3ds.do?lang=ru",
                          "maxLength": 255,
                          "nullable": true
                        }
                      },
                      "required": [
                        "md",
                        "acs_url",
                        "pa_req",
                        "term_url"
                      ]
                    }
                  },
                  "required": [
                    "credit_card"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Отсутствует обязательный параметр",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "parameter_missing",
                    "field": "order_uuid",
                    "message": "Отсутствует обязательный параметр"
                  }
                ],
                "code": 400
              }
            },
            "content": {}
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {}
          },
          "404": {
            "description": "Не найден",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Заказ не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {}
          }
        }
      }
    },
    "/api/v3/payments/sber_payments/credit_card": {
      "delete": {
        "summary": "Удаление привязанной карты",
        "tags": [
          "Credit Cards (Sber Payments)"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Задача удаления карты успешно запланирована",
            "examples": {
              "application/json": {
                "result": "ok"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "result": {
                      "type": "string",
                      "description": "внешний id владельца карты",
                      "example": "ok",
                      "maxLength": 255
                    }
                  },
                  "required": [
                    "result"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {}
          },
          "422": {
            "description": "Перреданы некорректные параметры",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "payment_tool",
                    "message": "must be present"
                  }
                ],
                "code": 422
              }
            },
            "content": {}
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "payment_option_id": {
                    "type": "string",
                    "description": "зашифрованный id payment_tool-а",
                    "example": "PAO+OVW/viuOYSHBxX0EVhutm1k0MNoeASkfoHSu0WA=",
                    "maxLength": 255
                  },
                  "ext_user_id": {
                    "type": "string",
                    "description": "внешний id владельца карты",
                    "example": "ext_user",
                    "maxLength": 255
                  }
                },
                "required": [
                  "payment_option_id",
                  "ext_user_id"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/payments/sber_payments/order_finalizations/finish": {
      "get": {
        "summary": "Инициация процесса авторизации SberPay",
        "tags": [
          "Credit Cards (Sber Payments)"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "order_number",
            "description": "Номер заказа",
            "in": "query",
            "example": "T20001",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "orderId",
            "description": "ID транзакции",
            "in": "query",
            "example": "58WWPE4Z",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Успешная авторизация. Получение ссылки на редирект.",
            "examples": {
              "application/json": {
                "messages": {
                  "order": "Ваш заказ был успешно обработан",
                  "sber_spasibo_error": null
                },
                "redirect": {
                  "destination": "/user/shipments/H32216078062"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "messages": {
                      "type": "object",
                      "description": "Сообщения о статусе операций с заказом",
                      "properties": {
                        "order": {
                          "type": "string",
                          "description": "Сообщение о статусе обработки заказа",
                          "example": "Ваш заказ был успешно обработан"
                        },
                        "sber_spasibo_error": {
                          "oneOf": [
                            {
                              "type": "string",
                              "description": "Сообщение о возможных ошибках сервиса СберСпасибо",
                              "example": "Кажется, что-то с картой или закончились бонусы. Позвоните 900 — там помогут"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "required": [
                        "order",
                        "sber_spasibo_error"
                      ]
                    },
                    "redirect": {
                      "type": "object",
                      "description": "Данные для редиректа",
                      "properties": {
                        "destination": {
                          "type": "string",
                          "description": "Путь для редиректа",
                          "example": "/user/shipments/H25217155143"
                        }
                      },
                      "required": [
                        "destination"
                      ]
                    }
                  },
                  "required": [
                    "messages",
                    "redirect"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Отсутствует обязательный параметр",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "parameter_missing",
                    "field": "order_number",
                    "message": "Отсутствует обязательный параметр"
                  }
                ],
                "code": 400
              }
            },
            "content": {}
          },
          "401": {
            "description": "Отсутствует или неверный токен авторизации",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {}
          },
          "404": {
            "description": "Не найден",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Заказ не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {}
          },
          "422": {
            "description": "Ошибка авторизации. Получение ссылки на редирект.",
            "examples": {
              "application/json": {
                "errors": "Ошибка авторизации кредитной карты",
                "code": "unprocessable_entity",
                "redirect": {
                  "destination": "/checkout/edit"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "string",
                      "description": "Сообщение об ошибке обработки заказа",
                      "example": "Ошибка авторизации кредитной карты"
                    },
                    "code": {
                      "type": "string",
                      "description": "Статус ошибки",
                      "example": "unprocessable_entity"
                    },
                    "redirect": {
                      "type": "object",
                      "description": "Данные для редиректа",
                      "properties": {
                        "destination": {
                          "type": "string",
                          "description": "Путь для редиректа",
                          "example": "/checkout/edit"
                        }
                      },
                      "required": [
                        "destination"
                      ]
                    }
                  },
                  "required": [
                    "errors",
                    "code",
                    "redirect"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/payments/sber_payments/sberpay_authorizations": {
      "post": {
        "summary": "Инициация процесса авторизации sperpay",
        "tags": [
          "Sberpay"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Авторизационный платеж создан",
            "examples": {
              "application/json": {
                "order_id": "372952ec-45fa-4edb-bb95-d617b1ee9b2a",
                "sbol_deep_link": "qwe"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "order_id",
                    "sbol_deep_link"
                  ],
                  "properties": {
                    "order_id": {
                      "type": "string",
                      "description": "Номер транзакции",
                      "example": "372952ec-45fa-4edb-bb95-d617b1ee9b2a",
                      "minLength": 36,
                      "maxLength": 36
                    },
                    "sbol_deep_link": {
                      "type": "string",
                      "description": "Deeplink, по которому необходимо перенаправить пользователя",
                      "example": "ru.sberbankmobile/payments/p2p?type=card_number",
                      "maxLength": 255
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Ошибка создания формы авторизации",
            "examples": {
              "application/json": {
                "errors": "Ошибка добавления карты",
                "code": "unprocessable_entity"
              }
            },
            "content": {}
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "app2app",
                  "os_type",
                  "deep_link",
                  "ext_user_id"
                ],
                "properties": {
                  "app2app": {
                    "type": "boolean",
                    "description": "Атрибут, указывающий на способ оплаты через приложение СБОЛ",
                    "example": true
                  },
                  "os_type": {
                    "type": "string",
                    "description": "Операционная система устройства пользователя",
                    "enum": [
                      "ios",
                      "android"
                    ],
                    "example": "ios"
                  },
                  "deep_link": {
                    "type": "string",
                    "description": "Ссылка на приложение мерчанта для возврата с успешной оплатой",
                    "example": "ru.sberbankmobile/payments/p2p?type=card_number",
                    "maxLength": 255
                  },
                  "ext_user_id": {
                    "type": "string",
                    "description": "Некий ID пользователя - владельца карты, может быть числом, UUID-ом, номером телефона, email-ом, и т.д.",
                    "example": "eb337b43-96bc-450f-9adc-4e5c34a76d69"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/payments/sber_payments/sberpay_authorizations/finish": {
      "post": {
        "summary": "Заверщение процесса авторизации sberpay",
        "tags": [
          "Sberpay"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Авторизация не пройдена",
            "examples": {
              "application/json": {
                "payment_option_id": "y+0jdXGVPDyIMAeV9JL4/pzNpt/ixgDuDZACRmNfloo=",
                "errors": "Ограничение по карте. Пожалуйста, обратитесь в банк, выпустивший карту.",
                "code": "ok"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "payment_option_id"
                  ],
                  "properties": {
                    "display_number": {
                      "type": "string",
                      "description": "Маскированный номер карты",
                      "example": "•••• 7890"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Авторизация не пройдена (некорректный номер транзакции, недоступен ПШ, и прочее)",
            "examples": {
              "application/json": {
                "errors": "Ошибка добавления карты",
                "code": "unprocessable_entity"
              }
            },
            "content": {}
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "transaction_number",
                  "ext_user_id"
                ],
                "properties": {
                  "transaction_number": {
                    "type": "string",
                    "description": "Номер транзакции (order_id) из первого шага",
                    "example": "372952ec-45fa-4edb-bb95-d617b1ee9b2a",
                    "minLength": 36,
                    "maxLength": 36
                  },
                  "ext_user_id": {
                    "type": "string",
                    "description": "ID пользователя из первого шага",
                    "example": "eb337b43-96bc-450f-9adc-4e5c34a76d69"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/products": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/client_token"
        },
        {
          "$ref": "#/components/parameters/session_token"
        },
        {
          "$ref": "#/components/parameters/store_id"
        },
        {
          "name": "tid",
          "in": "query",
          "description": "ID категории",
          "schema": {
            "type": "integer"
          }
        },
        {
          "name": "q",
          "in": "query",
          "description": "Строка поиска",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "$ref": "#/components/parameters/offers_sort"
        },
        {
          "name": "filter[permalink][]",
          "in": "query",
          "description": "Фильтры",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "filter[brand][]",
          "in": "query",
          "description": "Бренд",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "filter[country][]",
          "in": "query",
          "description": "Страна производитель",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "filter[root_category][]",
          "in": "query",
          "description": "Главная категория",
          "required": false,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "Список продуктов",
        "tags": [
          "Товары"
        ],
        "responses": {
          "200": {
            "description": "success",
            "examples": {
              "application/json": {
                "products": [
                  {
                    "id": "0000000537",
                    "legacy_offer_id": 435,
                    "legacy_product_id": 425,
                    "sku": "20819",
                    "retailer_sku": "0000000537",
                    "name": "Product #384",
                    "price": 1236.7,
                    "original_price": 1236.7,
                    "discount": 0,
                    "human_volume": "100 г.",
                    "volume": 100,
                    "volume_type": "weight",
                    "items_per_pack": 1,
                    "discount_ends_at": null,
                    "price_type": "per_kilo",
                    "grams_per_unit": 100,
                    "unit_price": 1236.7,
                    "original_unit_price": 1236.7,
                    "slug": "product-384",
                    "max_select_quantity": 999,
                    "canonical_url": "https://instamart.ru/products/20819-product-384",
                    "available": true,
                    "vat_info": null,
                    "promo_badge_ids": [],
                    "requirements": [],
                    "image_urls": []
                  },
                  {
                    "id": "0000000538",
                    "legacy_offer_id": 436,
                    "legacy_product_id": 426,
                    "sku": "20820",
                    "retailer_sku": "0000000538",
                    "name": "Product #385",
                    "price": 1236.7,
                    "original_price": 1236.7,
                    "discount": 0,
                    "human_volume": "100 г.",
                    "volume": 100,
                    "volume_type": "weight",
                    "items_per_pack": 1,
                    "discount_ends_at": null,
                    "price_type": "per_kilo",
                    "grams_per_unit": 100,
                    "unit_price": 1236.7,
                    "original_unit_price": 1236.7,
                    "slug": "product-385",
                    "max_select_quantity": 999,
                    "canonical_url": "https://instamart.ru/products/20820-product-385",
                    "available": true,
                    "vat_info": null,
                    "promo_badge_ids": [],
                    "requirements": [],
                    "image_urls": [
                      "https://instamart.ru/spree/products/87/original/1x1.png?1614955404"
                    ]
                  }
                ],
                "meta": {
                  "current_page": 1,
                  "next_page": null,
                  "previous_page": null,
                  "total_pages": 1,
                  "per_page": 10,
                  "total_count": 2
                },
                "facets": [
                  {
                    "key": "brand",
                    "name": "Бренд",
                    "type": "multi_select",
                    "options": []
                  },
                  {
                    "key": "country",
                    "name": "Страна изготовления",
                    "type": "multi_select",
                    "options": []
                  }
                ],
                "sort": [
                  {
                    "key": "popularity",
                    "name": "По популярности",
                    "order": "desc",
                    "active": true
                  },
                  {
                    "key": "price_asc",
                    "name": "Сначала дешевые",
                    "order": "asc",
                    "active": false
                  },
                  {
                    "key": "price_desc",
                    "name": "Сначала дорогие",
                    "order": "desc",
                    "active": false
                  }
                ],
                "root_categories": {
                  "key": "root_category",
                  "name": "Категория",
                  "type": "select",
                  "options": []
                },
                "promo_badges": []
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "products",
                    "promo_badges",
                    "meta",
                    "facets",
                    "sort",
                    "root_categories"
                  ],
                  "properties": {
                    "products": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/offer"
                      }
                    },
                    "promo_badges": {
                      "description": "Список бейджей",
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/promo_badge"
                      }
                    },
                    "meta": {
                      "$ref": "#/components/schemas/meta_info"
                    },
                    "facets": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/facet"
                      }
                    },
                    "sort": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/sort_item"
                      }
                    },
                    "root_categories": {
                      "$ref": "#/components/schemas/facet"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/products/{id}": {
      "get": {
        "summary": "Карточка продукта",
        "tags": [
          "Товары"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "$ref": "#/components/parameters/client_token"
          },
          {
            "$ref": "#/components/parameters/session_token"
          },
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID продукта",
            "schema": {
              "type": "string"
            }
          },
          {
            "$ref": "#/components/parameters/store_id"
          }
        ],
        "responses": {
          "200": {
            "description": "Карточка продукта",
            "examples": {
              "application/json": {
                "product": {
                  "id": "0000000547",
                  "legacy_offer_id": 445,
                  "legacy_product_id": 435,
                  "description": "<img src=\"https://storefront.staging.instamart.ru/spree/products/129959/original/picanta.jpg\" width=700px height=0px alt=\"Пиканта\"> <img src=\"https://storefront.staging.instamart.ru/spree/products/129959/original/picanta.jpg\" width=\"100%\" alt=\"Пиканта\"> <iframe width=\"100%\" height=350px src=\"https://www.youtube.com/embed/wSIhSSbhvJ4\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>",
                  "available": true,
                  "promo_badge_ids": [],
                  "properties": [
                    {
                      "name": "shelf_life",
                      "presentation": "shelf_life",
                      "value": "2 дня"
                    }
                  ],
                  "related_products": []
                },
                "promo_badges": []
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "product": {
                    "$ref": "#/components/schemas/offer_details"
                  },
                  "promo_badges": {
                    "$ref": "#/components/schemas/promo_badges"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/purchased_products": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/client_token"
        },
        {
          "$ref": "#/components/parameters/session_token"
        },
        {
          "$ref": "#/components/parameters/store_id"
        }
      ],
      "get": {
        "summary": "Список ранее купленных продуктов",
        "tags": [
          "Товары"
        ],
        "responses": {
          "200": {
            "description": "Список продуктов",
            "examples": {
              "application/json": {
                "products": [
                  {
                    "id": "0000000552",
                    "legacy_offer_id": 450,
                    "legacy_product_id": 440,
                    "sku": "20839",
                    "retailer_sku": "0000000552",
                    "name": "Product #399",
                    "price": 1000,
                    "original_price": 1000,
                    "discount": 0,
                    "human_volume": "100 г",
                    "volume": 100,
                    "volume_type": "weight",
                    "items_per_pack": 1,
                    "discount_ends_at": null,
                    "price_type": "per_kilo",
                    "grams_per_unit": 500,
                    "unit_price": 1000,
                    "original_unit_price": 1000,
                    "slug": "product-399",
                    "max_select_quantity": 999,
                    "canonical_url": "https://instamart.ru/products/20839-product-399",
                    "available": false,
                    "vat_info": null,
                    "promo_badge_ids": [
                      1
                    ],
                    "image_urls": [],
                    "requirements": []
                  }
                ],
                "meta": {
                  "current_page": 1,
                  "next_page": null,
                  "total_pages": 1,
                  "per_page": 10,
                  "total_count": 1
                },
                "promo_badges": [
                  {
                    "id": 1,
                    "type": "sberprime",
                    "attributes": {
                      "name": "sberprime",
                      "options": {
                        "active": {
                          "title": "-10% со СберПрайм",
                          "title_short": "-10%",
                          "tooltip": "На товар есть скидка по промокоду PRIME",
                          "url": "https://instamart.ru/metro/c/tolko-dlia-podpischikov-praim?sid=281",
                          "button_text": "Все товары со скидкой"
                        },
                        "inactive": {
                          "title": "-10% со СберПрайм",
                          "title_short": "-10%",
                          "tooltip": "Скидка на этот и сотни других товаров — для подписчиков СберПрайм",
                          "url": "https://sberbank.ru/sms/prime?utm_source=sbermarket&utm_medium=badgesweb&utm_campaign=prime",
                          "button_text": "Узнать про подписку"
                        }
                      }
                    }
                  }
                ]
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "products": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/offer"
                    }
                  },
                  "promo_badges": {
                    "$ref": "#/components/schemas/promo_badges"
                  }
                }
              }
            }
          },
          "ok": {
            "description": "Список продуктов",
            "examples": {
              "application/json": {
                "products": [],
                "meta": {
                  "current_page": 1,
                  "next_page": null,
                  "total_pages": 0,
                  "per_page": 10,
                  "total_count": 0
                },
                "promo_badges": []
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "products": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/offer"
                    }
                  },
                  "promo_badges": {
                    "$ref": "#/components/schemas/promo_badges"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/referral_program_config": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        }
      ],
      "get": {
        "summary": "Получение настроек реферральной программы",
        "tags": [
          "Реферальная программа"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "responses": {
          "ok": {
            "description": "successful",
            "examples": {
              "application/json": {
                "referral_program_config": {
                  "min_order_amount_with_precision": "1500",
                  "ambassador_instacoins_with_precision": "500",
                  "referral_instacoins_with_precision": "250"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "referral_program_config": {
                      "$ref": "#/components/schemas/referral_program_config"
                    }
                  },
                  "required": [
                    "referral_program_config"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/retailers": {
      "get": {
        "summary": "Получить список ретейлеров",
        "tags": [
          "Retailers"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "lat",
            "in": "query",
            "description": "Широта, допустимые значения: [-90, 90]",
            "example": 55.181312,
            "schema": {
              "type": "number",
              "minimum": -90,
              "maximum": 90
            },
            "required": false
          },
          {
            "name": "lon",
            "in": "query",
            "description": "Долгота, допустимые значения: [-180, 180]",
            "example": 61.3679104,
            "schema": {
              "type": "number",
              "minimum": -180,
              "maximum": 180
            },
            "required": false
          },
          {
            "name": "shipping_method",
            "in": "query",
            "description": "Способ доставки: delivery - для доставки, pickup_from_store - для самовывоза",
            "example": "delivery",
            "schema": {
              "type": "string",
              "enum": [
                "delivery",
                "pickup_from_store"
              ]
            },
            "required": false
          },
          {
            "name": "city_id",
            "in": "query",
            "description": "Идентификатор города",
            "example": "1",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "include",
            "in": "query",
            "description": "Какие поля включать в ответ, макс. длина 255",
            "example": "stores_count,shipping_methods",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "radius",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": -1,
              "maximum": 50000
            },
            "description": "Радиус поиска ретейлеров вокруг заданной точки, в метрах. Если передан -1, будет значение по умолчанию (50км)",
            "example": 10000
          }
        ],
        "responses": {
          "200": {
            "description": "Получение списка ритейлеров",
            "examples": {
              "application/json": [
                {
                  "name": "METRO1560",
                  "slug": "metro1560",
                  "stores_count": 1,
                  "appearance": null,
                  "shipping_methods": [
                    {
                      "title": "Самовывоз",
                      "type": "pickup"
                    }
                  ]
                }
              ]
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string",
                        "description": "Название",
                        "example": "Metro",
                        "maxLength": 255
                      },
                      "slug": {
                        "type": "string",
                        "description": "Код ритейлера",
                        "example": "metro",
                        "maxLength": 255
                      },
                      "appearance": {
                        "description": "Внешний вид",
                        "oneOf": [
                          {
                            "type": "null"
                          },
                          {
                            "$ref": "#/components/schemas/retailer_appearance"
                          }
                        ]
                      },
                      "stores_count": {
                        "type": "integer",
                        "description": "Количество магазинов у ритейлера подходящих под условие",
                        "example": 12
                      },
                      "shipping_methods": {
                        "type": "array",
                        "description": "Способы доставки",
                        "items": {
                          "type": "object",
                          "properties": {
                            "title": {
                              "type": "string",
                              "description": "Название способа доставки",
                              "example": "Курьером",
                              "maxLength": 255
                            },
                            "type": {
                              "type": "string",
                              "description": "Тип способа доставки",
                              "example": "by_courier",
                              "maxLength": 255
                            }
                          },
                          "required": [
                            "title",
                            "type"
                          ]
                        }
                      }
                    },
                    "required": [
                      "name",
                      "slug",
                      "appearance"
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "422": {
            "description": "Некорректный параметр",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "shipping_method",
                    "message": "имеет непредусмотренное значение"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/setup_info/stores": {
      "get": {
        "summary": "Доступные для ритейлера магазины",
        "tags": [
          "SetupInfo"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "retailer_id",
            "in": "query",
            "description": "Идентификатор ритейлера, макс. длина 255",
            "example": "metro",
            "required": false,
            "schema": {
              "type": "string",
              "maxLength": 255
            }
          },
          {
            "name": "ids",
            "in": "query",
            "description": "Идентификаторы магазинов, разделенные запятой",
            "example": "7ff0071b-42ec-432f-98a4-ec6d9de19e33,2a692119-4f9f-46a6-b4ad-805500ec5fc4",
            "required": false,
            "style": "form",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false
          },
          {
            "name": "per_page",
            "in": "query",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "Cписок магазинов",
            "examples": {
              "application/json": []
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "id": {
                        "type": "string",
                        "description": "Идентификатор магазина",
                        "example": "1g6f3798-f53c-4666-b27c-0evfab6b0c7x",
                        "maxLength": 255
                      },
                      "retailer_id": {
                        "type": "string",
                        "description": "Идентификатор ритейлера",
                        "example": "metro",
                        "maxLength": 255
                      },
                      "name": {
                        "type": "string",
                        "description": "Название магазина",
                        "example": "METRO, Фридриха Энгельса",
                        "maxLength": 255
                      },
                      "min_order_amount": {
                        "type": "integer",
                        "description": "Минимальная сумма заказа",
                        "nullable": true,
                        "example": 100000,
                        "maximum": 2147483647,
                        "minimum": 0
                      },
                      "location": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": [
                          "lat",
                          "lon",
                          "city",
                          "street",
                          "building"
                        ],
                        "properties": {
                          "lat": {
                            "type": "number",
                            "nullable": true,
                            "description": "Широта",
                            "maximum": 90,
                            "minimum": -90,
                            "example": 55.761208
                          },
                          "lon": {
                            "type": "number",
                            "nullable": true,
                            "description": "Долгота",
                            "maximum": 180,
                            "minimum": -180,
                            "example": 37.640354
                          },
                          "city": {
                            "type": "string",
                            "nullable": true,
                            "description": "Город",
                            "maxLength": 255,
                            "example": "Москва"
                          },
                          "street": {
                            "type": "string",
                            "nullable": true,
                            "description": "Улица",
                            "maxLength": 255,
                            "example": "пр. Ленинский"
                          },
                          "building": {
                            "type": "string",
                            "nullable": true,
                            "description": "Дом",
                            "maxLength": 255,
                            "example": "100А"
                          }
                        }
                      },
                      "zones": {
                        "type": "array",
                        "description": "Зоны доставки",
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "id",
                            "name",
                            "area"
                          ],
                          "properties": {
                            "id": {
                              "type": "string",
                              "format": "uuid",
                              "description": "Индентификатор зоны доставки",
                              "example": "8b8d639a-a20e-461d-a00b-d70e4fe07c9d",
                              "maxLength": 36
                            },
                            "name": {
                              "type": "string",
                              "description": "Название зоны доставки",
                              "example": "METRO, пр-кт Мира подзона №1",
                              "maxLength": 255
                            },
                            "area": {
                              "type": "array",
                              "description": "Координаты области зоны доставки",
                              "items": {
                                "type": "array",
                                "items": {
                                  "type": "array",
                                  "items": {
                                    "type": "number",
                                    "format": "float",
                                    "minimum": -180,
                                    "maximum": 180
                                  }
                                }
                              },
                              "example": [
                                [
                                  [
                                    37.327,
                                    55.747
                                  ]
                                ]
                              ]
                            }
                          }
                        }
                      },
                      "order_options": {
                        "type": "array",
                        "description": "Способы оплаты и доставки",
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "properties": {
                            "title": {
                              "type": "string",
                              "description": "Название способа оплаты и доставки",
                              "example": "Доставка курьером",
                              "maxLength": 255
                            },
                            "shipping_method_type": {
                              "type": "string",
                              "description": "Тип метода доставки",
                              "example": "delivery",
                              "maxLength": 255
                            },
                            "payment_methods": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "additionalProperties": false,
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "description": "Тип метода оплаты",
                                    "example": "APPLE_PAY",
                                    "maxLength": 255
                                  },
                                  "title": {
                                    "type": "string",
                                    "description": "Название метода оплаты",
                                    "example": "ApplePay",
                                    "maxLength": 255
                                  }
                                },
                                "required": [
                                  "type",
                                  "title"
                                ]
                              }
                            }
                          },
                          "required": [
                            "title",
                            "shipping_method_type",
                            "payment_methods"
                          ]
                        }
                      }
                    },
                    "required": [
                      "id",
                      "retailer_id",
                      "name",
                      "min_order_amount",
                      "location",
                      "zones",
                      "order_options"
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/setup_info": {
      "get": {
        "summary": "Справочная информация об интеграции",
        "tags": [
          "SetupInfo"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          }
        ],
        "responses": {
          "200": {
            "description": "Справочная информация",
            "examples": {
              "application/json": {
                "phones": [
                  "+79996665522"
                ],
                "emails": [
                  "test@email.com"
                ],
                "basic_delivery_cost": 24900
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "phones": {
                      "type": "array",
                      "description": "Телефоны поддержки",
                      "items": {
                        "type": "string",
                        "example": "+70981234567",
                        "maxLength": 65535
                      }
                    },
                    "emails": {
                      "type": "array",
                      "description": "Адреса электронной почты поддержки",
                      "items": {
                        "type": "string",
                        "maxLength": 65535,
                        "format": "email",
                        "example": "user@example.com"
                      }
                    },
                    "basic_delivery_cost": {
                      "type": "integer",
                      "description": "Цена доставки по умолчанию",
                      "example": 10000,
                      "maximum": 2147483647,
                      "minimum": 0
                    }
                  },
                  "required": [
                    "phones",
                    "emails",
                    "basic_delivery_cost"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        }
      }
    },
    "/api/stores/{store_id}/store_zones_map": {
      "parameters": [
        {
          "$ref": "#/components/parameters/api_version"
        },
        {
          "$ref": "#/components/parameters/session_token"
        },
        {
          "$ref": "#/components/parameters/store_id"
        },
        {
          "name": "top_left_point[lon]",
          "description": "Долгота верхней левой точки",
          "in": "query",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "top_left_point[lat]",
          "description": "Широта верхней левой точки",
          "in": "query",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "bottom_right_point[lon]",
          "description": "Долгота нижней правой точки",
          "in": "query",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "bottom_right_point[lat]",
          "description": "Широта нижней правой точки",
          "in": "query",
          "required": false,
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "summary": "Получение списка зон доставки ритейлера",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "tags": [
          "Зоны доставки"
        ],
        "responses": {
          "ok": {
            "description": "Зоны доставки, входящие в прямоугольник, заданный параметрами *_point",
            "examples": {
              "application/json": {
                "store_zones_map": {
                  "retailer": {
                    "color": "#003d7a"
                  },
                  "stores": []
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "store_zones_map": {
                    "$ref": "#/components/schemas/store_zones_map"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/stores/{id}/closest_shipping_options": {
      "post": {
        "summary": "Ближайшие опции доставки",
        "tags": [
          "Stores"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "id",
            "in": "path",
            "description": "Идентификатор магазина, макс. длина 255",
            "example": "ab7520ac-4cff-43be-a683-71a40a658b58",
            "required": true,
            "schema": {
              "type": "string",
              "maxLength": 255
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Информация по заказу",
            "examples": {
              "application/json": {
                "data": [
                  {
                    "option_id": "by_courier:179f6c8f-5ed0-4311-a8dd-1a785d6e940a",
                    "starts_at": "2021-03-05T19:43:17.000+03:00",
                    "ends_at": "2021-03-05T19:43:17.000+03:00",
                    "express_delivery": false,
                    "summary": "сегодня 19:43–19:43"
                  },
                  {
                    "option_id": "by_courier:6e287d1d-7f6f-44a4-8f2a-ea61038c5158",
                    "starts_at": "2021-03-06T09:00:00.000+03:00",
                    "ends_at": "2021-03-06T12:00:00.000+03:00",
                    "express_delivery": false,
                    "summary": "завтра 09:00–12:00"
                  }
                ]
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "description": "Опция доставки",
                        "properties": {
                          "option_id": {
                            "type": "string",
                            "description": "Идентификатор опции доставки",
                            "example": "by_courier:1g6f3798-f53c-4666-b27c-0evfab6b0c7x",
                            "maxLength": 255
                          },
                          "price": {
                            "type": "integer",
                            "description": "Цена в копейках (заполняется только при переданной корзине)",
                            "example": 15000,
                            "minimum": 0,
                            "maximum": 99999999
                          },
                          "starts_at": {
                            "type": "string",
                            "description": "Начало действия опции доставки",
                            "example": "2021-02-09T09:00:00.000+03:00",
                            "maxLength": 255
                          },
                          "ends_at": {
                            "type": "string",
                            "description": "Окончание действия опции доставки",
                            "example": "2021-02-09T09:00:00.000+03:00",
                            "maxLength": 255
                          },
                          "express_delivery": {
                            "type": "boolean",
                            "description": "Флаг быстрой доставки",
                            "example": true
                          },
                          "summary": {
                            "type": "string",
                            "description": "Текст времени действия",
                            "example": "завтра 09:00–10:00",
                            "maxLength": 255
                          }
                        },
                        "required": [
                          "option_id",
                          "starts_at",
                          "ends_at",
                          "express_delivery"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Магазин не существует"
                  }
                ],
                "code": 404
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "422": {
            "description": "Bad Request",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "shipping_method",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "shipping_method",
                    "message": "имеет непредусмотренное значение"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "limit": {
                    "type": "integer",
                    "description": "Максимальное число возвращаемых записей",
                    "minimum": 1,
                    "maximum": 10,
                    "example": 3
                  },
                  "shipping_method": {
                    "type": "string",
                    "description": "Способ доставки: delivery - для доставки, pickup_from_store - для самовывоза",
                    "max_length": 255,
                    "example": "delivery"
                  },
                  "order": {
                    "type": "object",
                    "description": "Собранная корзина пользователя",
                    "properties": {
                      "items": {
                        "type": "array",
                        "description": "Состав заказа",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "description": "SKU продукта",
                              "maxLength": 255,
                              "example": "123456"
                            },
                            "price": {
                              "type": "integer",
                              "description": "Цена в копейках",
                              "minimum": 1,
                              "maximum": 9999999999,
                              "example": 12000
                            },
                            "discount": {
                              "type": "integer",
                              "description": "Скидка в копейках",
                              "minimum": 0,
                              "maximum": 9999999999,
                              "example": 12000
                            },
                            "promo_total": {
                              "type": "integer",
                              "description": "Сумма промо-скидки",
                              "example": 200,
                              "minimum": 0,
                              "maximum": 2147483647
                            },
                            "quantity": {
                              "type": "integer",
                              "description": "Количество единиц товара",
                              "example": 2,
                              "minimum": 0,
                              "maximum": 2147483647
                            }
                          },
                          "required": [
                            "id",
                            "quantity"
                          ]
                        }
                      },
                      "shipping": {
                        "type": "object",
                        "description": "Способ доставки",
                        "properties": {
                          "address": {
                            "type": "object",
                            "description": "Адрес доставки (только при доставке курьером)",
                            "properties": {
                              "lat": {
                                "type": "number",
                                "description": "Широта",
                                "example": 55.761208,
                                "minimum": -90,
                                "maximum": 90
                              },
                              "lon": {
                                "type": "number",
                                "description": "Долгота",
                                "example": 37.640354,
                                "minimum": -180,
                                "maximum": 180
                              }
                            },
                            "required": [
                              "lat",
                              "lon"
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "required": [
                  "shipping_method"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v3/stores/for_map": {
      "get": {
        "summary": "Получение магазинов для вывода на карте",
        "tags": [
          "Stores"
        ],
        "description": "Получение магазинов для вывода на карте",
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "bbox",
            "in": "query",
            "required": true,
            "pattern": "^\\d+\\.\\d+,\\d+\\.\\d+~\\d+\\.\\d+,\\d+\\.\\d+$",
            "example": "10.9,9.9~11.1,10.1",
            "description": "Boundary box в формате левый нижний угол(lon, lat)~правый верхний угол(lon,lat)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "shipping_method",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "by_courier",
                "by_courier_for_companies",
                "pickup"
              ]
            },
            "description": "Фильтр по доступному способу доставки, по умолчанию pickup",
            "required": false,
            "default": "pickup"
          },
          {
            "name": "retailer_ids",
            "in": "query",
            "required": false,
            "description": "Фильтр по ритейлеру",
            "example": "1,2",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Список получен",
            "examples": {
              "application/json": {
                "stores": [],
                "retailers": []
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "stores": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer"
                          },
                          "lat": {
                            "type": "number"
                          },
                          "lon": {
                            "type": "number"
                          },
                          "full_address": {
                            "type": "string"
                          },
                          "retailer_id": {
                            "type": "integer"
                          },
                          "work_hours": {
                            "type": "string",
                            "description": "Строка с временем работы магазина для вывода"
                          },
                          "marked": {
                            "type": "boolean",
                            "description": "Отметка о необходимости выделить этот магазин на карте"
                          }
                        },
                        "required": [
                          "id",
                          "lat",
                          "lon",
                          "full_address",
                          "retailer_id",
                          "work_hours",
                          "marked"
                        ]
                      }
                    },
                    "retailers": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "description": "Идентификатор ритейлера"
                          },
                          "name": {
                            "type": "string",
                            "description": "Наименвоание ритейлера"
                          },
                          "slug": {
                            "type": "string",
                            "description": "Код ритейлера",
                            "example": "metro"
                          },
                          "appearence": {
                            "$ref": "#/components/schemas/retailer_appearance"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "slug",
                          "appearance"
                        ]
                      }
                    }
                  },
                  "required": [
                    "stores",
                    "retailers"
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Ошибки валидации, возможные причины: <br />\nНеправильно передан один из основных параметров: будет текст об ошибке <br />\nНевалидный зум, попробуйте сузить зону поиска: bbox_distance_violation\n",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "bbox_distance_violation",
                    "field": "base",
                    "message": "Пожалуйста, попробуйте сузить зону поиска"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        }
      }
    },
    "/api/v3/stores": {
      "get": {
        "summary": "Проверяет доступные магазины для заказа",
        "tags": [
          "Stores"
        ],
        "security": [
          {
            "client_token_auth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/api_version"
          },
          {
            "name": "lat",
            "in": "query",
            "description": "Широта, допустимые значения: [-90, 90] (Необязательный для самовывоза)",
            "example": 55.181312,
            "schema": {
              "type": "number",
              "minimum": -90,
              "maximum": 90
            },
            "required": true
          },
          {
            "name": "lon",
            "in": "query",
            "description": "Долгота, допустимые значения: [-180, 180] (Необязательный для самовывоза)",
            "example": 61.3679104,
            "schema": {
              "type": "number",
              "minimum": -180,
              "maximum": 180
            },
            "required": true
          },
          {
            "name": "shipping_method",
            "in": "query",
            "description": "Способ доставки: delivery - для доставки, pickup_from_store - для самовывоза,\n          также используется для фильтрации ближайших слотов доставки\n          при передаче параметра include=closest_shipping_methods",
            "example": "delivery",
            "schema": {
              "type": "string",
              "enum": [
                "delivery",
                "pickup_from_store"
              ]
            },
            "required": false
          },
          {
            "name": "retailer_id",
            "in": "query",
            "description": "Идентификатор ритейлера",
            "example": "metro",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "city_id",
            "in": "query",
            "description": "Идентификатор города",
            "example": "1",
            "schema": {
              "type": "string"
            },
            "required": false
          },
          {
            "name": "include",
            "in": "query",
            "description": "Какие поля включать в ответ, макс. длина 255",
            "example": "labels,retailer,next_deliveries",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "radius",
            "in": "query",
            "example": -1,
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": -1,
              "maximum": 50000
            },
            "description": "Ограничение радиуса поиска магазинов самовывоза. Работает только с lat/lon и shipping_method=pickup_from_store"
          }
        ],
        "responses": {
          "200": {
            "description": "Информация по магазинам",
            "examples": {
              "application/json": [
                {
                  "id": "161bac2f-1544-4ec6-b8c7-6735e894e0bf",
                  "store_id": 302,
                  "name": "METRO1554, 307th street",
                  "min_order_amount": 0,
                  "min_order_amount_pickup": 0,
                  "min_first_order_amount": 0,
                  "min_first_order_amount_pickup": 0,
                  "distance": null,
                  "delivery_forecast_text": null,
                  "on_demand": false,
                  "express_delivery": false,
                  "shipping_methods": [
                    {
                      "title": "Доставка курьером",
                      "type": "by_courier"
                    },
                    {
                      "title": "Самовывоз",
                      "type": "pickup"
                    }
                  ],
                  "labels": [],
                  "retailer": {
                    "name": "METRO1554",
                    "slug": "metro",
                    "appearance": {
                      "background_color": "#100042",
                      "image_color": "#100043",
                      "black_theme": false,
                      "logo_image": "/retailer_banners/1/logo_images/1x1.png?1648204981",
                      "side_image": "/side_images/original/missing.png"
                    }
                  }
                }
              ]
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "description": "идентификатор магазина",
                        "example": "1g6f3798-f53c-4666-b27c-0evfab6b0c7x",
                        "maxLength": 255
                      },
                      "store_id": {
                        "type": "integer",
                        "description": "идентификатор магазина (внутренний)",
                        "example": 123
                      },
                      "name": {
                        "type": "string",
                        "description": "название магазина",
                        "example": "METRO, Фридриха Энгельса",
                        "maxLength": 255
                      },
                      "shipping_methods": {
                        "type": "array",
                        "description": "Способы доставки",
                        "items": {
                          "type": "object",
                          "properties": {
                            "title": {
                              "type": "string",
                              "description": "Название способа доставки",
                              "example": "Курьером",
                              "maxLength": 255
                            },
                            "type": {
                              "type": "string",
                              "description": "Тип способа доставки",
                              "example": "by_courier",
                              "maxLength": 255
                            }
                          },
                          "required": [
                            "title",
                            "type"
                          ]
                        }
                      },
                      "retailer": {
                        "type": "object",
                        "description": "Ритейлер",
                        "required": [
                          "name",
                          "appearance"
                        ],
                        "properties": {
                          "name": {
                            "type": "string",
                            "description": "Название",
                            "example": "Metro",
                            "maxLength": 255
                          },
                          "appearance": {
                            "type": "object",
                            "description": "Настройка отображения",
                            "properties": {
                              "background_color": {
                                "type": "string"
                              },
                              "image_color": {
                                "type": "string"
                              },
                              "black_theme": {
                                "type": "boolean"
                              },
                              "logo_image": {
                                "type": "string"
                              },
                              "side_image": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      },
                      "closest_shipping_options": {
                        "type": "array",
                        "description": "Ближайшие слоты с доставкой",
                        "items": {
                          "type": "object",
                          "properties": {
                            "title": {
                              "option": "string",
                              "description": "Идентификатор",
                              "example": "pickup:46cdd780-2473-4f63-b5e6-3cf05225750a\"",
                              "maxLength": 255
                            },
                            "price": {
                              "type": "number",
                              "description": "Цена",
                              "example": "490.0"
                            },
                            "summary": {
                              "type": "string",
                              "description": "Текст времени действия",
                              "example": "завтра 09:00–10:00",
                              "maxLength": 255
                            },
                            "starts_at": {
                              "type": "string",
                              "description": "Время начала слота",
                              "example": "2021-07-02T10:00:00.000+03:00",
                              "maxLength": 255
                            },
                            "ends_at": {
                              "type": "datetime",
                              "description": "Время окончания слота",
                              "example": "2021-07-02T10:00:00.000+03:00",
                              "maxLength": 255
                            },
                            "express_delivery": {
                              "type": "boolean",
                              "description": "Признак быстрой доставки"
                            }
                          },
                          "required": [
                            "id",
                            "price",
                            "summary",
                            "starts_at",
                            "ends_at"
                          ]
                        }
                      },
                      "labels": {
                        "type": "array",
                        "description": "Группы",
                        "items": {
                          "type": "object",
                          "required": [
                            "uuid",
                            "title",
                            "subtitle",
                            "code",
                            "icon"
                          ],
                          "properties": {
                            "uuid": {
                              "type": "string",
                              "description": "UUID группы",
                              "example": "bf538d49-2170-4bd2-979e-ef3406a5e58a",
                              "length": 36
                            },
                            "title": {
                              "type": "string",
                              "description": "Название группы",
                              "example": "Быстрая доставка",
                              "maxLength": 255
                            },
                            "subtitle": {
                              "type": "string",
                              "description": "Описание группы",
                              "example": "Доставка за 15 минут",
                              "maxLength": 255
                            },
                            "code": {
                              "type": "string",
                              "description": "Код группы",
                              "example": "express_delivery",
                              "maxLength": 255
                            },
                            "icon": {
                              "type": "string",
                              "description": "Название иконки",
                              "example": "delivery",
                              "maxLength": 255
                            }
                          }
                        }
                      },
                      "distance": {
                        "type": "integer",
                        "description": "Растояние до магазина",
                        "example": 10000,
                        "nullable": true
                      }
                    },
                    "required": [
                      "id",
                      "name",
                      "shipping_methods"
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Не авторизован",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "unauthorized",
                    "field": null,
                    "message": "Вы не авторизованы"
                  }
                ],
                "code": 401
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "404": {
            "description": "Магазины не найдены",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": "not_found",
                    "field": null,
                    "message": "Магазины не найдены"
                  }
                ],
                "code": 404
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          },
          "422": {
            "description": "Отсутствует обязательный параметр",
            "examples": {
              "application/json": {
                "errors": [
                  {
                    "type": null,
                    "field": "lon",
                    "message": "не может быть пустым"
                  },
                  {
                    "type": null,
                    "field": "lon",
                    "message": "не является числом"
                  },
                  {
                    "type": null,
                    "field": "lon",
                    "message": "недостаточной длины (не может быть меньше 1 символа)"
                  }
                ],
                "code": 422
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/errors_object"
                }
              }
            }
          }
        }
      }
    }
  },
  "produces": "application/json",
  "components": {
    "parameters": {
      "api_version": {
        "name": "Api-Version",
        "in": "header",
        "required": true,
        "description": "Версия API",
        "example": "3.0",
        "schema": {
          "type": "string",
          "maxLength": 255
        }
      },
      "client_token": {
        "name": "Client-Token",
        "in": "header",
        "required": true,
        "description": "Токен клиента",
        "example": "qwerty123",
        "schema": {
          "type": "string",
          "maxLength": 255
        }
      },
      "session_token": {
        "name": "Session-Token",
        "in": "header",
        "schema": {
          "type": "string",
          "maxLength": 255
        },
        "description": "Токен сессии"
      },
      "store_id": {
        "name": "store_id",
        "in": "path",
        "schema": {
          "type": "integer",
          "maxLength": 255
        },
        "required": true,
        "description": "ID магазина"
      },
      "offers_sort": {
        "name": "sort",
        "in": "query",
        "schema": {
          "type": "string",
          "enum": [
            "popularity",
            "price_asc",
            "price_desc"
          ],
          "description": "Порядок сортировки"
        },
        "required": false
      }
    },
    "securitySchemes": {
      "client_token_auth": {
        "type": "apiKey",
        "name": "Client-Token",
        "in": "header",
        "description": "Токен авторизации клиента"
      }
    },
    "schemas": {
      "errors_object": {
        "type": "object",
        "properties": {
          "errors": {
            "description": "Сообщения об ошибках",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "nullable": true,
                  "description": "Тип ошибки",
                  "example": "unprocessable_entity",
                  "maxLength": 255
                },
                "field": {
                  "type": "string",
                  "nullable": true,
                  "description": "Поле указывающее на ошибку",
                  "example": "name",
                  "maxLength": 255
                },
                "message": {
                  "type": "string",
                  "description": "Описание ошибки",
                  "example": "не может быть пустым",
                  "maxLength": 65535
                }
              },
              "required": [
                "type",
                "field",
                "message"
              ]
            }
          },
          "code": {
            "type": "integer",
            "description": "Код ошибки",
            "example": 422
          }
        },
        "required": [
          "errors",
          "code"
        ]
      },
      "generic_error": {
        "type": "object",
        "required": [
          "errors",
          "code"
        ],
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string"
                },
                "field": {
                  "type": "string",
                  "nullable": true
                },
                "message": {
                  "type": "string"
                }
              }
            }
          },
          "code": {
            "type": "integer"
          }
        }
      },
      "store_zones_map": {
        "type": "object",
        "properties": {
          "retailer": {
            "type": "object",
            "description": "Текущий ритейлер",
            "properties": {
              "color": {
                "description": "Цвет ритейлера",
                "type": "string"
              }
            },
            "required": [
              "color"
            ]
          },
          "stores": {
            "type": "array",
            "description": "Массив магазинов текущего ритейлера",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "description": "Название магазина",
                  "type": "string"
                },
                "available": {
                  "description": "Доступен ли магазин для текущего адреса пользователя/заказа",
                  "type": "boolean"
                },
                "store_zones": {
                  "type": "array",
                  "description": "Зоны доставки магазина",
                  "items": {
                    "type": "object",
                    "properties": {
                      "coordinates": {
                        "type": "array",
                        "description": "Массив наборов координат, очерчивающих границы зоны доставки",
                        "items": {
                          "type": "array",
                          "description": "Набор координат границы зоны доставки",
                          "items": {
                            "type": "array",
                            "description": "Координаты одной точки границы зоны доставки"
                          }
                        }
                      }
                    },
                    "required": [
                      "coordinates"
                    ]
                  }
                }
              },
              "required": [
                "name",
                "available",
                "store_zones"
              ]
            }
          }
        },
        "required": [
          "retailer",
          "stores"
        ]
      },
      "department": {
        "type": "object",
        "properties": {
          "id": {
            "description": "ID департамента",
            "type": "integer"
          },
          "taxon_id": {
            "description": "ID категории",
            "type": "integer"
          },
          "type": {
            "description": "Тип категории",
            "type": "string"
          },
          "slug": {
            "description": "slug категории",
            "type": "string"
          },
          "icon_url": {
            "type": "string",
            "description": "URL иконки",
            "nullable": true
          },
          "name": {
            "description": "Название категории",
            "type": "string"
          },
          "products_count": {
            "description": "Число продуктов",
            "type": "integer"
          },
          "products": {
            "description": "Список продуктов",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/offer"
            }
          },
          "children": {
            "description": "Подотделы отдела",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/department"
            }
          }
        }
      },
      "referral_program_config": {
        "type": "object",
        "properties": {
          "min_order_amount_with_precision": {
            "description": "Минимальная сумма заказа для реферальной программы",
            "type": "numeric"
          },
          "ambassador_instacoins_with_precision": {
            "description": "Сумма в инстакойнах для приведшего реферала",
            "type": "numeric"
          },
          "referral_instacoins_with_precision": {
            "description": "Сумма в инстакойнах для реферала",
            "type": "numeric"
          }
        }
      },
      "tenant_contact": {
        "type": "object",
        "required": [
          "company_phone",
          "company_name",
          "company_address",
          "company_inn",
          "company_kpp",
          "company_ogrn",
          "company_settlement_acc",
          "company_bank",
          "company_bik",
          "company_correspondent_acc"
        ],
        "properties": {
          "company_phone": {
            "type": "string",
            "description": "Номер телефона поддержки клиентов"
          },
          "company_name": {
            "type": "string",
            "description": "Реквизиты - название организации",
            "nullable": true
          },
          "company_address": {
            "type": "string",
            "description": "Реквизиты - адрес организации",
            "nullable": true
          },
          "company_inn": {
            "type": "string",
            "description": "Реквизиты - ИНН",
            "nullable": true
          },
          "company_kpp": {
            "type": "string",
            "description": "Реквизиты - КПП",
            "nullable": true
          },
          "company_ogrn": {
            "type": "string",
            "description": "Реквизиты - ОГРН",
            "nullable": true
          },
          "company_settlement_acc": {
            "type": "string",
            "description": "Реквизиты - номер р/с",
            "nullable": true
          },
          "company_bank": {
            "type": "string",
            "description": "Реквизиты - название банка",
            "nullable": true
          },
          "company_bik": {
            "type": "string",
            "description": "Реквизиты - БИК",
            "nullable": true
          },
          "company_correspondent_acc": {
            "type": "string",
            "description": "Реквизиты - К/С",
            "nullable": true
          }
        }
      },
      "ad_banner": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Название баннера"
          },
          "description": {
            "type": "string",
            "description": "Описание баннера"
          },
          "starts_at": {
            "type": "string",
            "description": "Описание баннера"
          },
          "ends_at": {
            "type": "string",
            "description": "Описание баннера"
          },
          "source_url": {
            "type": "string",
            "description": "URL исходного изображения баннера"
          },
          "url": {
            "type": "string",
            "description": "URL исходного изображения баннера"
          },
          "open_in_new_window": {
            "type": "boolean",
            "description": "Нужно ли открывать баннер в новом окне"
          }
        },
        "required": [
          "name",
          "description",
          "starts_at",
          "ends_at",
          "source_url",
          "url",
          "open_in_new_window"
        ]
      },
      "address": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "first_name": {
            "type": "string",
            "description": "Имя",
            "nullable": true
          },
          "last_name": {
            "type": "string",
            "description": "Фамилия",
            "nullable": true
          },
          "full_address": {
            "type": "string",
            "description": "Адрес"
          },
          "city": {
            "type": "string",
            "description": "Населенный пункт"
          },
          "phone": {
            "type": "string",
            "description": "Телефон"
          },
          "street": {
            "type": "string",
            "description": "Улица"
          },
          "building": {
            "type": "string",
            "description": "Дом"
          },
          "block": {
            "type": "string",
            "description": "Строение",
            "nullable": true
          },
          "entrance": {
            "type": "string",
            "description": "Подъезд",
            "nullable": true
          },
          "floor": {
            "type": "string",
            "description": "Этаж",
            "nullable": true
          },
          "apartment": {
            "type": "string",
            "description": "Номер квартиры / Офис",
            "nullable": true
          },
          "comments": {
            "type": "string",
            "description": "Комментарии",
            "nullable": true
          },
          "lat": {
            "type": "number",
            "format": "double",
            "description": "Широта",
            "nullable": true
          },
          "lon": {
            "type": "number",
            "format": "double",
            "description": "Долгота",
            "nullable": true
          },
          "kind": {
            "type": "string",
            "nullable": true
          },
          "door_phone": {
            "type": "string",
            "description": "Домофон",
            "nullable": true
          },
          "delivery_to_door": {
            "type": "boolean",
            "description": "Доставка до двери"
          }
        }
      },
      "company_document": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string",
            "description": "Юридическое лицо"
          },
          "inn": {
            "type": "string",
            "description": "Инн"
          },
          "kpp": {
            "type": "string",
            "description": "КПП"
          },
          "bik": {
            "type": "string",
            "description": "Бик"
          },
          "bank": {
            "type": "string",
            "description": "Банк"
          },
          "correspondent_account": {
            "type": "string",
            "description": "Корреспондентский счет"
          },
          "operating_account": {
            "type": "string",
            "description": "Расчетный счет"
          },
          "address": {
            "type": "string",
            "description": "Юридический адрес"
          }
        }
      },
      "credit_card": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "title": {
            "type": "string",
            "nullable": true,
            "description": "Нзавание"
          },
          "name": {
            "type": "string",
            "description": "Имя держателя"
          },
          "year": {
            "type": "string",
            "description": "Год"
          },
          "month": {
            "type": "string",
            "description": "Месяц"
          },
          "last_digits": {
            "type": "string",
            "description": "Последние 4 цифры"
          },
          "state": {
            "type": "string",
            "description": "Состояние"
          },
          "cc_type": {
            "type": "string",
            "description": "Тип карты",
            "nullable": true
          },
          "eligible": {
            "type": "boolean",
            "description": "Можно использовать"
          }
        }
      },
      "delivery_window": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "starts_at": {
            "type": "string",
            "format": "date-time",
            "description": "Время начала слота доставки"
          },
          "ends_at": {
            "type": "string",
            "format": "date-time",
            "description": "Время окончания слота доставки"
          },
          "weight_balance": {
            "type": "integer",
            "description": "Вес заказа"
          },
          "items_count_balance": {
            "type": "integer",
            "description": "Кол-во позиций в заказе"
          },
          "kind": {
            "type": "string",
            "description": "Способ доставки"
          },
          "delivery_forecast_text": {
            "type": "string",
            "nullable": true,
            "description": "Интервал доставки в формате \"10:15–10:25\""
          },
          "lifetime": {
            "type": "integer",
            "nullable": true
          },
          "is_express_delivery": {
            "type": "boolean"
          },
          "estimate_source": {
            "type": "string"
          },
          "time_zone": {
            "type": "string"
          },
          "human_interval": {
            "type": "string"
          },
          "estimate_minutes_min": {
            "type": "integer"
          },
          "estimate_minutes_max": {
            "type": "integer"
          },
          "available_for_tinkoff_dolyame": {
            "type": "boolean"
          },
          "date": {
            "type": "string",
            "format": "date"
          },
          "available": {
            "type": "boolean"
          }
        }
      },
      "facet": {
        "type": "object",
        "required": [
          "key",
          "name",
          "type"
        ],
        "properties": {
          "key": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "multi_select",
              "toggle",
              "select"
            ]
          },
          "options": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "value",
                "count",
                "active"
              ],
              "properties": {
                "name": {
                  "type": "string"
                },
                "value": {
                  "type": "number"
                },
                "permalink": {
                  "type": "string"
                },
                "count": {
                  "type": "number"
                },
                "active": {
                  "type": "boolean"
                }
              }
            }
          }
        }
      },
      "favorite_list_item": {
        "type": "object",
        "properties": {
          "id": {
            "description": "ID позиции",
            "type": "integer"
          },
          "product_id": {
            "description": "ID продукта",
            "type": "integer"
          },
          "name": {
            "description": "Название позиции",
            "type": "string"
          },
          "sku": {
            "description": "SKU позиции",
            "type": "string"
          },
          "product": {
            "$ref": "#/components/schemas/offer"
          }
        }
      },
      "feature_flag": {
        "type": "object",
        "properties": {
          "name": {
            "description": "Имя фичи",
            "type": "string",
            "example": "test_feature"
          },
          "enabled": {
            "description": "Включен ли фич-флаг для текущего пользователя",
            "type": "boolean"
          }
        },
        "required": [
          "name",
          "enabled"
        ]
      },
      "marketing_category": {
        "type": "object",
        "description": "Маркетинговая категория",
        "properties": {
          "id": {
            "description": "ID",
            "type": "integer"
          },
          "name": {
            "description": "Название",
            "type": "string"
          },
          "slug": {
            "description": "slug",
            "type": "string"
          },
          "banner_url": {
            "description": "Ссылка на баннер",
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "id",
          "name",
          "slug",
          "banner_url"
        ]
      },
      "merge_items_response": {
        "type": "object",
        "properties": {
          "merge_possible": {
            "type": "boolean",
            "description": "Возможность дозаказа",
            "example": false
          },
          "impossibility_reasons": {
            "type": "array",
            "description": "Причины невозможности дозаказа",
            "items": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Код причины",
                  "example": "invalid_shipment_state_pending",
                  "maxLength": 255
                },
                "title": {
                  "type": "string",
                  "description": "Наименование причины",
                  "example": "Invalid shipment state pending",
                  "maxLength": 255
                },
                "details": {
                  "type": "string",
                  "description": "Подробное описанеи причины",
                  "example": "Shipment should have 'ready' state, but it 'pending'",
                  "maxLength": 65536
                }
              },
              "required": [
                "code",
                "title",
                "details"
              ]
            }
          },
          "delivery_cost": {
            "type": "float",
            "description": "Стоимость доставки",
            "example": 200,
            "minimum": -2147483648,
            "maximum": 2147483647
          },
          "delivery_time": {
            "type": "object",
            "properties": {
              "starts_at": {
                "type": "string",
                "description": "Время начала слота доставки",
                "example": "2022-01-11T09:00:00.000+03:00",
                "maxLength": 255
              },
              "ends_at": {
                "type": "string",
                "description": "Время окончания слота доставки",
                "example": "2022-01-11T09:00:00.000+03:00",
                "maxLength": 255
              }
            },
            "required": [
              "starts_at",
              "ends_at"
            ]
          }
        },
        "required": [
          "merge_possible",
          "delivery_cost",
          "delivery_time"
        ]
      },
      "meta_info": {
        "type": "object",
        "properties": {
          "current_page": {
            "type": "number"
          },
          "next_page": {
            "type": "number",
            "nullable": true
          },
          "total_pages": {
            "type": "number"
          },
          "per_page": {
            "type": "number",
            "nullable": true
          },
          "total_count": {
            "type": "number"
          }
        }
      },
      "offer_details": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "description": "Описание продукта"
          },
          "properties": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "ID продукта"
                },
                "legacy_offer_id": {
                  "type": "integer",
                  "description": "ID оффера, для обратной совместимости с легаси компонентами фронтэнда"
                },
                "legacy_product_id": {
                  "type": "integer",
                  "description": "ID продукта, для обратной совместимости с легаси компонентами фронтэнда"
                },
                "name": {
                  "type": "string",
                  "description": "Название свойства"
                },
                "presentation": {
                  "type": "string",
                  "description": "Название свойста"
                },
                "value": {
                  "type": "any",
                  "description": "Значение свойства"
                }
              }
            }
          },
          "related_products": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/offer"
            }
          }
        }
      },
      "order_options_response": {
        "type": "object",
        "properties": {
          "optionals": {
            "description": "Пустой массив",
            "type": "array",
            "items": {}
          },
          "payment_methods": {
            "type": "array",
            "description": "Платёжные методы",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "description": "Тип платёжного метода (возможные варианты: \"card\", \"cash\", \"transfer\", \"card_to_courier\", \"cash_desk\", \"external_partner_pay\")",
                  "maxLength": 255,
                  "example": "card"
                },
                "title": {
                  "type": "string",
                  "description": "Название платёжного метода",
                  "maxLength": 255,
                  "example": "Картой онлайн"
                },
                "options": {
                  "type": "array",
                  "description": "Платёжный инструмент пользователя на основе платёжного метода",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "description": "uuid или хеш идентификатора",
                        "maxLength": 255,
                        "example": "BU5LjOXqfVtcnydLnDJFbMrdbDf/+CumT8MsbtY3QXM="
                      },
                      "name": {
                        "type": "string",
                        "description": "Название платёжного инструмента",
                        "maxLength": 255,
                        "example": "VISA **** 4444"
                      }
                    },
                    "required": [
                      "id",
                      "name"
                    ]
                  }
                }
              },
              "required": [
                "type",
                "title",
                "options"
              ]
            }
          },
          "shipping_methods": {
            "type": "array",
            "description": "Методы доставки",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "description": "Тип метода доставки (возможные варианты: \"pickup\", \"by_courier\", \"by_courier_for_companies\")",
                  "maxLength": 255,
                  "example": "pickup"
                },
                "options": {
                  "type": "array",
                  "description": "Слоты доставки",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "description": "Идентификатор слота доставки, первая часть это метод доставки, вторая uuid",
                        "maxLength": 255,
                        "example": "pickup:38b7a283-e6a3-481a-9590-ed8b131f93db"
                      },
                      "price": {
                        "type": "integer",
                        "description": "Цена",
                        "example": 0,
                        "maximum": 2147483647,
                        "minimum": 0
                      },
                      "original_price": {
                        "type": "integer",
                        "description": "Исходная цена",
                        "maximum": 2147483647,
                        "minimum": 0,
                        "example": 0
                      },
                      "starts_at": {
                        "type": "string",
                        "description": "Начинается в",
                        "example": "2021-02-09T18:00:00.000+03:00",
                        "maxLength": 255
                      },
                      "ends_at": {
                        "type": "string",
                        "description": "Кончается в",
                        "example": "2021-02-09T18:00:00.000+03:00",
                        "maxLength": 255
                      }
                    },
                    "required": [
                      "id",
                      "price",
                      "original_price",
                      "starts_at",
                      "ends_at"
                    ]
                  }
                }
              },
              "required": [
                "type",
                "options"
              ]
            }
          },
          "replacement_options": {
            "type": "array",
            "description": "Методы замены",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "Тип",
                  "example": "call",
                  "maxLength": 255
                },
                "description": {
                  "type": "string",
                  "description": "Описание варианта замены",
                  "example": "call",
                  "maxLength": 255
                }
              },
              "required": [
                "id",
                "description"
              ]
            }
          }
        },
        "required": [
          "optionals",
          "payment_methods",
          "shipping_methods",
          "replacement_options"
        ]
      },
      "order": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "number": {
            "type": "string"
          },
          "total": {
            "type": "number",
            "format": "double"
          },
          "promo_total": {
            "type": "number",
            "format": "double"
          },
          "total_discount": {
            "type": "number",
            "format": "double"
          },
          "item_count": {
            "type": "integer"
          },
          "shipping_method_kind": {
            "type": "string"
          },
          "total_weight": {
            "type": "number",
            "format": "double"
          },
          "shipping_methods": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "pickup"
            }
          },
          "is_alcohol": {
            "type": "boolean"
          },
          "contacts": {
            "type": "object",
            "properties": {
              "normalized_phone": {
                "type": "string",
                "example": "+7 933 333-33-33",
                "nullable": true
              },
              "phone": {
                "type": "string",
                "example": "+79333333333",
                "nullable": true
              },
              "email": {
                "type": "string",
                "example": "dmin@instamart.ru",
                "nullable": true
              }
            }
          },
          "address": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/address"
              }
            ]
          },
          "payments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/payment"
            }
          },
          "shipments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/shipment"
            }
          },
          "payment_tool": {
            "type": "array",
            "default": [],
            "nullable": true,
            "items": {
              "$ref": "#/components/schemas/payment_tool"
            }
          },
          "promotion_codes": {
            "type": "array",
            "default": [],
            "description": "Список примененных промокодов",
            "items": {
              "$ref": "#/components/schemas/promotion_code"
            }
          },
          "replacement_policy": {
            "type": "object",
            "nullable": true,
            "properties": {
              "id": {
                "type": "integer",
                "example": 123
              },
              "description": {
                "type": "string",
                "example": "Позвонить мне. Подобрать замену, если не смогу ответить",
                "max_length": 255,
                "min_length": 1
              }
            }
          }
        }
      },
      "paid_order_event": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Тип события",
            "maxLength": 255,
            "example": "order.paid"
          },
          "payload": {
            "type": "object",
            "description": "Данные по событию",
            "properties": {
              "order_id": {
                "type": "string",
                "description": "Идентификатор заказа",
                "maxLength": 255,
                "example": "order.paid"
              }
            },
            "required": [
              "order_id"
            ]
          }
        },
        "required": [
          "type",
          "payload"
        ]
      },
      "payment": {
        "type": "object",
        "description": "Данные об оплате",
        "properties": {
          "number": {
            "type": "string",
            "description": "Номер платежа"
          },
          "state": {
            "type": "string",
            "description": "Cостояние платежа"
          },
          "is_finalization_needed": {
            "type": "boolean",
            "description": "Требуется ли оформление платежа"
          },
          "finalization_url": {
            "type": "string",
            "description": "url перехода для оформления платежа",
            "nullable": true
          }
        }
      },
      "nullable_payment": {
        "type": "object",
        "description": "Данные об оплате",
        "properties": {
          "number": {
            "type": "string",
            "description": "Номер платежа"
          },
          "state": {
            "type": "string",
            "description": "Cостояние платежа"
          },
          "is_finalization_needed": {
            "type": "boolean",
            "description": "Требуется ли оформление платежа"
          },
          "finalization_url": {
            "type": "string",
            "description": "url перехода для оформления платежа",
            "nullable": true
          }
        },
        "nullable": true
      },
      "payment_tool": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string",
            "description": "Название способа оплаты"
          },
          "type": {
            "type": "string",
            "description": "Тип способа оплаты"
          },
          "source": {
            "oneOf": [
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "description": "Тип платежного средства",
                    "enum": [
                      "credit_card"
                    ]
                  },
                  "credit_card": {
                    "$ref": "#/components/schemas/credit_card"
                  }
                }
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "description": "Тип платежного средства",
                    "enum": [
                      "company_document"
                    ]
                  },
                  "company_document": {
                    "$ref": "#/components/schemas/company_document"
                  }
                }
              },
              {
                "type": "null"
              }
            ]
          }
        }
      },
      "offer": {
        "type": "object",
        "properties": {
          "id": {
            "description": "ID продукта",
            "type": "string"
          },
          "sku": {
            "description": "SKU продукта",
            "type": "string"
          },
          "retailer_sku": {
            "description": "SKU продукта у ритейлера",
            "type": "string"
          },
          "legacy_offer_id": {
            "type": "integer",
            "description": "ID оффера, для обратной совместимости с легаси компонентами фронтэнда"
          },
          "legacy_product_id": {
            "type": "integer",
            "description": "ID продукта, для обратной совместимости с легаси компонентами фронтэнда"
          },
          "name": {
            "description": "Название продукта",
            "type": "string"
          },
          "slug": {
            "description": "Slug продукта",
            "type": "string"
          },
          "canonical_url": {
            "description": "Canonical URL продукта",
            "type": "string"
          },
          "max_select_quantity": {
            "description": "Максимальное количество товара, которое можно положить в корзину",
            "type": "integer"
          },
          "price": {
            "description": "Цена продукта",
            "type": "number"
          },
          "original_price": {
            "description": "Цена продукта без скидок",
            "type": "number"
          },
          "discount": {
            "description": "Скидка",
            "type": "number"
          },
          "human_volume": {
            "description": "Объем продукта (локализованный)",
            "type": "string"
          },
          "volume": {
            "description": "Объем продукта",
            "type": "number"
          },
          "volume_type": {
            "description": "Тип объема продукта",
            "type": "string"
          },
          "items_per_pack": {
            "description": "Число штук в упаковке",
            "type": "integer",
            "nullable": true
          },
          "discount_ends_at": {
            "description": "Конец действия скидки",
            "type": "string",
            "nullable": true
          },
          "price_type": {
            "description": "Тип цены",
            "type": "string"
          },
          "grams_per_unit": {
            "description": "Вес в граммах единицы штук",
            "type": "number"
          },
          "unit_price": {
            "description": "Цена за 1 штуку",
            "type": "number"
          },
          "original_unit_price": {
            "description": "Цена за 1 штуку без скидки",
            "type": "number"
          },
          "image_urls": {
            "description": "URL изображений",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "requirements": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "promo_badge": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID бейджа"
          },
          "type": {
            "type": "string",
            "description": "Тип"
          },
          "attributes": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Имя"
              },
              "options": {
                "type": "object",
                "properties": {
                  "active": {
                    "type": "object",
                    "properties": {
                      "title": {
                        "type": "string",
                        "description": "Текст бейджа"
                      },
                      "title_short": {
                        "type": "string"
                      },
                      "tooltip": {
                        "type": "string",
                        "description": "Текст тултипа для бейджа"
                      },
                      "url": {
                        "type": "string",
                        "description": "Ссылка, по которой осуществляется переход при нажатии на кнопку"
                      },
                      "button_text": {
                        "type": "string",
                        "description": "Текст кнопки"
                      }
                    }
                  },
                  "inactive": {
                    "type": "object",
                    "properties": {
                      "title": {
                        "type": "string",
                        "description": "Текст бейджа"
                      },
                      "title_short": {
                        "type": "string"
                      },
                      "tooltip": {
                        "type": "string",
                        "description": "Текст тултипа для бейджа"
                      },
                      "url": {
                        "type": "string",
                        "description": "Ссылка, по которой осуществляется переход при нажатии на кнопку"
                      },
                      "button_text": {
                        "type": "string",
                        "description": "Текст кнопки"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "promotion_code": {
        "type": "object",
        "properties": {
          "value": {
            "type": "string"
          },
          "description": {
            "nullable": true,
            "type": "string"
          }
        }
      },
      "requirement": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          }
        }
      },
      "retailer_agreement": {
        "type": "object",
        "properties": {
          "agreement_type": {
            "type": "string"
          },
          "url": {
            "type": "string"
          }
        }
      },
      "retailer_appearance": {
        "type": "object",
        "properties": {
          "background_color": {
            "type": "string"
          },
          "image_color": {
            "type": "string"
          },
          "black_theme": {
            "type": "boolean"
          },
          "logo_image": {
            "type": "string"
          },
          "side_image": {
            "type": "string",
            "nullable": true
          },
          "mini_logo_image": {
            "type": "string"
          }
        }
      },
      "retailer": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string",
            "description": "Наименование ритейлера"
          },
          "slug": {
            "type": "string"
          },
          "color": {
            "type": "string",
            "description": "Цвет ритейлера"
          },
          "logo_background_color": {
            "type": "string",
            "description": "Фоновый цвет"
          },
          "logo": {
            "type": "string",
            "description": "Лого ритейлера"
          },
          "available": {
            "type": "boolean",
            "description": "Флаг доступности"
          },
          "environment": {
            "type": "string",
            "description": "Окружение"
          },
          "retailer_agreement": {
            "$ref": "#/components/schemas/retailer_agreement"
          },
          "appearance": {
            "description": "Внешний вид",
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/retailer_appearance"
              }
            ]
          },
          "requirements": {
            "type": "array",
            "default": [],
            "items": {
              "$ref": "#/components/schemas/requirement"
            }
          }
        }
      },
      "session_error_response": {
        "type": "object",
        "properties": {
          "errors": {
            "description": "Сообщения об ошибках",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "nullable": true,
                  "description": "Тип ошибки",
                  "example": "unprocessable_entity",
                  "maxLength": 255
                },
                "field": {
                  "type": "string",
                  "nullable": true,
                  "description": "Поле указывающее на ошибку",
                  "example": "name",
                  "maxLength": 255
                },
                "message": {
                  "type": "string",
                  "description": "Описание ошибки",
                  "example": "не может быть пустым",
                  "maxLength": 65535
                }
              },
              "required": [
                "type",
                "field",
                "message"
              ]
            }
          },
          "code": {
            "type": "integer",
            "description": "Код ошибки",
            "example": 422
          }
        },
        "required": [
          "errors"
        ]
      },
      "shipment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "number": {
            "type": "string"
          },
          "cost": {
            "type": "number",
            "format": "double"
          },
          "promo": {
            "type": "number",
            "format": "double"
          },
          "discount": {
            "type": "number",
            "format": "double"
          },
          "is_alcohol": {
            "type": "boolean"
          },
          "item_total": {
            "type": "integet"
          },
          "total": {
            "type": "number",
            "format": "double"
          },
          "alerts": {
            "type": "array",
            "default": [],
            "description": "Cписок предупреждений об ошибках в заказе",
            "items": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                },
                "full_message": {
                  "type": "string"
                },
                "type": {
                  "type": "string"
                },
                "key": {
                  "type": "string"
                },
                "details": {
                  "type": "object",
                  "properties": {
                    "min_amount": {
                      "type": "number",
                      "format": "double"
                    },
                    "remaining_amount": {
                      "type": "number",
                      "format": "double"
                    }
                  }
                }
              }
            }
          },
          "total_weight": {
            "type": "integer"
          },
          "checkout": {
            "type": "boolean"
          },
          "retailer": {
            "$ref": "#/components/schemas/retailer"
          },
          "shipping_rate": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/shipping_rate"
              }
            ]
          },
          "delivery_window": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/delivery_window"
              }
            ]
          },
          "store": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/shipment_store"
              },
              {
                "type": "null"
              }
            ]
          }
        }
      },
      "shipment_store": {
        "type": "object",
        "description": "Магазин",
        "properties": {
          "id": {
            "type": "integer"
          },
          "time_zone": {
            "type": "string"
          },
          "express_delivery": {
            "type": "boolean"
          },
          "on_demand": {
            "type": "boolean"
          },
          "local_date": {
            "type": "date"
          }
        }
      },
      "shipping_rate": {
        "type": "object",
        "properties": {
          "total_value": {
            "type": "number",
            "format": "double"
          },
          "value": {
            "type": "number",
            "format": "double"
          },
          "is_boost": {
            "type": "boolean"
          },
          "is_drop": {
            "type": "boolean"
          },
          "is_free": {
            "type": "boolean"
          },
          "is_express_delivery": {
            "type": "boolean"
          },
          "delivery_window": {
            "$ref": "#/components/schemas/delivery_window"
          }
        }
      },
      "sort_item": {
        "type": "object",
        "required": [
          "key",
          "name",
          "order"
        ],
        "properties": {
          "key": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "order": {
            "type": "string"
          },
          "active": {
            "type": "boolean"
          }
        }
      },
      "taxon": {
        "type": "object",
        "properties": {
          "id": {
            "description": "ID категории",
            "type": "integer"
          },
          "parent_id": {
            "description": "ID родительской категории",
            "type": "integer"
          },
          "type": {
            "description": "Тип категории",
            "type": "string"
          },
          "name": {
            "description": "Название категории",
            "type": "string"
          },
          "slug": {
            "description": "slug категории",
            "type": "string"
          },
          "canonical_url": {
            "description": "Canonical URL продукта",
            "type": "string"
          },
          "products_count": {
            "description": "Число продуктов",
            "type": "integer"
          },
          "position": {
            "description": "Позиция",
            "type": "integer"
          },
          "depth": {
            "description": "Глубина в дереве",
            "type": "integer"
          },
          "is_promo": {
            "description": "Флаг промо категории",
            "type": "boolean"
          },
          "breadcrumbs": {
            "type": "array",
            "description": "Список хлебных крошек",
            "items": {
              "$ref": "#/components/schemas/taxon"
            }
          },
          "ad_banners": {
            "description": "Рекламные баннеры",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ad_banner"
            }
          },
          "icon_url": {
            "description": "URL иконки категории",
            "type": "string",
            "nullable": true
          },
          "alt_icon": {
            "description": "URL доп. иконки"
          },
          "children": {
            "description": "Список подкатегорий",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/taxon"
            }
          }
        },
        "required": [
          "id",
          "type",
          "name",
          "products_count",
          "icon_url"
        ]
      }
    }
  }
}