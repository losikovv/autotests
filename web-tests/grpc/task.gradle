task grpcProductHub(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/grpc-content.xml'
        includeGroups 'grpc-product-hub'
    }
    environment 'PROJECT_ID', 'PB'
    environment 'TEST_RUN_NAME', 'gRPC Platform Backend Regress'
}

task grpcSalutToken(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/grpc-content.xml'
        includeGroups 'grpc-salut-token'
    }
    environment 'PROJECT_ID', 'STS'
    environment 'TEST_RUN_NAME', 'gRPC Salut Token Regress'
}

task onDemandTM(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/tag-manager.xml'
        includeGroups 'grpc-tag-manager'
    }
    environment 'PROJECT_ID', 'TM'
    environment 'TEST_RUN_NAME', 'Tag Manager Autotests'
}

task ciRunGrpc(type: Test) {
    def CI_GROUP = System.getenv('CI_GROUP')

    if (CI_GROUP == null) {
        println('U miss CI_GROUP')
        return
    }

    useTestNG() {
        suites "src/test/resources/suite/all.xml"
        includeGroups CI_GROUP
    }
}

task grpcAuthorizationService(type: Test) {
    useTestNG() {
        suites 'src/test/resources/suite/authorization-service.xml'
        includeGroups 'grpc-authorization-service'
    }
    environment 'PROJECT_ID', 'CS'
    environment 'TEST_RUN_NAME', 'Authorization Service Autotests'
}